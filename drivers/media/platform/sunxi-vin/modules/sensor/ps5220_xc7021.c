/* **************************************************************************************
 *ps5220_xc7021.c
 *A V4L2 driver for ps5220_AW6131 cameras
 *Copyright (c) 2014 by Allwinnertech Co., Ltd.http://www.allwinnertech.com
 *	Version		Author			Date				Description
 *	1.0			richard.liu		2017/03/01			ps5220_xc7021 YUV sensor Support
 *	1.1			richard.liu		2017/03/10			optimize sharpness \ AWE\AE
 *	1.2			richard.liu		2017/03/15			optimize sharpness \ AWE\AE 720P & 480P
 *	1.3			richard.liu		2017/03/16			add 640*360
 *	1.4			zhengjiangwei	2017/09/27			adapt vin in H6
 ****************************************************************************************
 */
#include <linux/init.h>
#include <linux/module.h>
#include <linux/slab.h>
#include <linux/i2c.h>
#include <linux/delay.h>
#include <linux/videodev2.h>
#include <linux/clk.h>
#include <media/v4l2-device.h>
#include <media/v4l2-chip-ident.h>
#include <media/v4l2-mediabus.h>
#include <linux/io.h>
#include "camera.h"

/*static struct delayed_work sensor_s_ae_ratio_work;*/
#define SENSOR_NAME "ps5220_xc7021"
#include "sensor_helper.h"

MODULE_AUTHOR("jiangwei.zheng");
MODULE_DESCRIPTION("A low-level driver for ps5220_xc7021 sensors");
MODULE_LICENSE("GPL");

/*define module timing*/
#define MCLK              (24*1000*1000)
#define VREF_POL          V4L2_MBUS_VSYNC_ACTIVE_LOW
#define HREF_POL          V4L2_MBUS_HSYNC_ACTIVE_HIGH
#define CLK_POL           V4L2_MBUS_PCLK_SAMPLE_RISING
#define V4L2_IDENT_SENSOR  0x7021
#define PS5220_CHIPID      (0x52)

/*
 * Our nominal (default) frame rate.
 */
#define SENSOR_FRAME_RATE		25
#define SENSOR_FRAME_RATE_15FPS 15

/*
 * The  ISP xc7021 i2c address
 */
#define XC7021_WRITE_ADDR	(0x36)
#define XC7021_READ_ADDR	(0x37)
/*
 * The  PS5220 sensor i2c address, the PS5220 i2c address  different XC7021 address
 */
#define I2C_ADDR_PS5220_SENSOR	(0x90 >> 1)

/*#define DEBUG_COLORBAR       1*/


static int ps5220_i2c_bypass(struct v4l2_subdev *sd, bool enable);

/*
 * Information we maintain about a known sensor.
 */

static struct regval_list bypass_on[] = {
	{0xfffd, 0x80},
	{0xfffe, 0x50},
	{0x004d, 0x01},
};

static struct regval_list bypass_off[] = {
	{0xfffd, 0x80},
	{0xfffe, 0x50},
	{0x004d, 0x00},
};


static struct regval_list XC7021_default_regs_25fps[] = {
	/*25 fps  cofigure*/
	{0xfffd, 0x80},
	{0xfffe, 0x50},
	{0x001c, 0xff},
	{0x001d, 0xff},
	{0x001e, 0xff},
	{0x001f, 0xff}, /*clk en*/
	{0x0018, 0x00},
	{0x0019, 0x00},
	{0x001a, 0x00},
	{0x001b, 0x00},	/* reset*/
	{0x00bc, 0x11}, /*pad */
	{0x00bd, 0x00},
	{0x00be, 0x00},
	{0x00bf, 0x00},
	{0x0030, 0x9},
	{0x0031, 0x2},
	{0x0032, 0xA},
	{0x0020, 0x1},
	{0x0021, 0xE},
	{0x0023, 0x2},
	{0x0024, 0x6},
	{0x0025, 0x6},
	{0x0026, 0x1},
	{0x0027, 0x6},
	{0x0028, 0x8},
	{0x0029, 0x6},

	/* change page to 50 page*/
	{0xfffe, 0x50},
	/* setting of ISP for pin drive capability */
	{0x00aa, 0x10},/* pclk drive capability  00, 10, 20, 30*/
	{0x00ac, 0x10},/* data pin drive capability  00, 10, 20, 30*/
	{0x00ad, 0x10},/* data pin drive capability  00, 10, 20, 30*/
	{0x00ae, 0x10},/* data pin drive capability  00, 10, 20, 30*/
	{0x00af, 0x10},/* data pin drive capability  00, 10, 20, 30*/

	{0xfffe, 0x30},
	{0x0005, 0x08},

	{0xfffe, 0x25},
	{0x0002, 0xf0},
	{0xfffe, 0x50},
	{0x0200, 0x03},
	{0x0204, 0x03},
	{0x0208, 0x02},
	{0x0208, 0x01},

	{0xfffd, 0x80},
	{0xfffe, 0x50},
	{0x00bc, 0x11},
	{0x001b, 0x00},
	{0x0090, 0x29},

	{0xfffe, 0x20},
	{0x0000, 0x00},
	{0x0004, 0x07},
	{0x0005, 0x80},
	{0x0006, 0x04},
	{0x0007, 0x40},

	{0xfffe, 0x26},
	{0x4000, 0xF9},
	{0x6001, 0x14},
	{0x6005, 0xc4},
	{0x6006, 0x0F},
	{0x6007, 0xA0},
	{0x6008, 0x0E},
	{0x6009, 0xFC},

	{0x8000, 0x3f},
	{0x8001, 0x80},
	{0x8002, 0x07},
	{0x8003, 0x40},
	{0x8004, 0x04},
	{0x8005, 0x03},
	{0x8006, 0x05},
	{0x8007, 0x99},
	{0x8008, 0x14},

	{0x8010, 0x05},
	{0x8012, 0x80},
	{0x8013, 0x07},
	{0x8014, 0x38},
	{0x8015, 0x04},
	{0x8016, 0x00},
	{0x8017, 0x00},
	{0x8018, 0x00},
	{0x8019, 0x00},

	{0xfffe, 0x30},
	{0x0001, 0x85},
	{0x0004, 0x18},
	{0x0006, 0x07},
	{0x0007, 0x80},
	{0x0008, 0x04},
	{0x0009, 0x38},
	{0x000a, 0x07},
	{0x000b, 0x80},
	{0x000c, 0x04},
	{0x000d, 0x38},
	{0x0027, 0xF7},
	{0x005e, 0x07},
	{0x005f, 0x7F},
	{0x0060, 0x04},
	{0x0061, 0x37},
	{0x1908, 0x01},
	{0x1900, 0x00},
	{0x1901, 0x00},
	{0x1902, 0x00},
	{0x1903, 0x00},
	{0x1904, 0x07},
	{0x1905, 0x80},
	{0x1906, 0x04},
	{0x1907, 0x3A},
	{0xfffe, 0x30},  /*AVG*/
	{0x1f00, 0x00},
	{0x1f01, 0x00},
	{0x1f02, 0x00},
	{0x1f03, 0x00},
	{0x1f04, 0x07},
	{0x1f05, 0x80},
	{0x1f06, 0x04},
	{0x1f07, 0x38},
	{0x0051, 0x03},
	/*AE*/
	{0xfffe, 0x14},
	{0x0026, 0x01},
	{0x0035, 0x01},
	{0x00be, 0x90},  	 /*camera i2c id*/
	{0x00bf, 0x00},  	 /*camera i2c bits     */
	{0x00c0, 0x05},  	 /*sensor type gain*/
	{0x00c1, 0x05},  	 /*sensor type exposure*/
	{0x00c3, 0x00},     /*sensor mode select*/

	/*exposure */
	{0x00c4, 0x00},   /*write camera exposure variable [15:12]*/
	{0x00c5, 0x0c},
	{0x00c6, 0x00},  /*write camera exposure variable [11:4]*/
	{0x00c7, 0x0d},
	{0x00c8, 0x00},  /*write camera exposure variable [3:0]*/
	{0x00c9, 0x00},
	{0x00cc, 0x00},  /*camera exposure addr mask 1*/
	{0x00cd, 0xff},
	{0x00ce, 0x00},  /*camera exposure addr mask 2*/
	{0x00cf, 0xff},
	{0x00d0, 0x00},   /*camera exposure addr mask 3*/
	{0x00d1, 0x00},
	{0x00d2, 0x00},   /*camera exposure addr mask 4*/
	{0x00d3, 0x00},
	/*gain*/
	{0x00e4, 0x00},  /*camera gain addr*/
	{0x00e5, 0x78},
	{0x00e6, 0x00},   /*camera gain addr*/
	{0x00e7, 0x79},
	{0x00ec, 0x00},  /*camera gain addr mask 1*/
	{0x00ed, 0xff},
	{0x00ee, 0x00},  /*camera gain addr mask 2*/
	{0x00ef, 0x00},
	{0x00f0, 0x00},  /*camera gain addr mask 3*/
	{0x00f1, 0x00},
	{0x00f2, 0x00},  /*camera gain addr mask 4*/
	{0x00f3, 0x00},

	/*banding*/
	{0x00b4, 0x02},  /* banding mode*/
	{0x00b8, 0x0A},  /* banding  exposure lines*/
	{0x00b9, 0xA0},

	/* AE CFG*/
	{0xfffe, 0x14},
	{0x00aa, 0x03},
	{0x00ab, 0x00},  /*017f //max gain*/
	{0x00ba, 0x00},    /*low light mode*/
	{0x006a, 0x01},
	{0x006b, 0x40},  /*0140 //night target*/
	{0x006c, 0x01},
	{0x006d, 0xc0},  /*0120 //day target  */
	{0x0073, 0x08},   /*AttAvgReviseDiff*/

	{0x0092, 0x43},
	{0x0093, 0x00},

	/*AE SPEED*/
	{0xfffe, 0x14},
	{0x0039, 0x00},    /*DETECT enable*/
	{0x0060, 0x00},    /*smart mode 03*/

	{0x0076, 0x01},     /* delay frame*/
	{0x0079, 0x01},
	{0x007a, 0x00},
	{0x007b, 0x30},		/*1. threshold low  */
	{0x007c, 0x00},
	{0x007d, 0x80},   /*2. threshold high*/
	{0x0077, 0x20},    /*3. finally thr  */
	{0x0078, 0x01},    /*total speed */
	{0x007f, 0x80},   /* jump threshold*/
	{0x0087, 0x60},   /* jump ratio*/
	{0x0088, 0x02},   /* jump times*/
	{0x008a, 0x00},
	{0x008b, 0xa0},
	{0x008c, 0x03},
	{0x008d, 0x80},

	/*AE window*/
	{0x3f, 0x01},
	{0x40, 0x01},
	{0x41, 0x01},
	{0x42, 0x01},
	{0x43, 0x01},
	{0x44, 0x01},
	{0x45, 0x01},
	{0x46, 0x01},
	{0x47, 0x01},
	{0x48, 0x01},
	{0x49, 0x01},
	{0x4a, 0x01},
	{0x4b, 0x01},
	{0x4c, 0x01},
	{0x4d, 0x01},
	{0x4e, 0x01},
	{0x4f, 0x01},
	{0x50, 0x01},
	{0x51, 0x01},
	{0x52, 0x01},
	{0x53, 0x01},
	{0x54, 0x01},
	{0x55, 0x01},
	{0x56, 0x01},
	{0x57, 0x01},
	{0x3a, 0x01},

	/* AE SMART*/
	{0x010f, 0x00}, /* exp delay*/
	{0x0110, 0x00},  /* gia delay*/
	{0x0112, 0x03},   /* Att Detect Speed*/
	{0x0113, 0x03},
	{0x0114, 0x03},		/* below or above cnt*/
	{0x011a, 0x00},
	{0x011b, 0x60},   /*day min attention  avg thr*/
	{0x011c, 0x02},
	{0x011d, 0x80},   /* day max attention  avg thr*/
	{0x011e, 0x00},
	{0x011f, 0x40},   /* day min avg thr*/
	{0x0120, 0x02},
	{0x0121, 0xc0},   /* day max avg thr*/
	{0x0062, 0x00},
	{0x0063, 0x60},    /*  D-N*/
	{0x0064, 0x00},
	{0x0065, 0x40},    /* N-D*/
	{0x0066, 0x01},
	{0x0067, 0x00},   /* dark thr*/
	{0x0074, 0x20},    /* diff ratio low*/
	{0x0075, 0x40},    /* diff ratio high */
	{0x006e, 0x06},    /* magnituede offset*/
	{0x006f, 0x01},     /* magnituede MIN*/
	{0x012a, 0x05},  /* variance thr promote luma*/
	{0x012b, 0x00},
	{0x012c, 0x00},   /* variance ratio*/
	{0x012d, 0x30},

	{0xfffd, 0x80},
	{0xfffe, 0x50},
	{0x000e, 0x54},
	{0xfffe, 0x14},
	{0x0006, 0x02},
	{0x0007, 0x57},
	{0x0014, 0x00},
	{0x0015, 0x14},
	{0x0016, 0x06},
	{0x0017, 0xf8},
	{0x03d4, 0x9c},
	{0x03d5, 0x21},
	{0x03d6, 0xff},
	{0x03d7, 0xf4},
	{0x03d8, 0xd4},
	{0x03d9, 0x01},
	{0x03da, 0x48},
	{0x03dc, 0xd4},
	{0x03dd, 0x01},
	{0x03de, 0x50},
	{0x03df, 0x04},
	{0x03e0, 0xd4},
	{0x03e1, 0x01},
	{0x03e2, 0x60},
	{0x03e3, 0x08},
	{0x03e4, 0x18},
	{0x03e5, 0x60},
	{0x03e7, 0x14},
	{0x03e8, 0xa8},
	{0x03e9, 0x63},
	{0x03ea, 0x01},
	{0x03eb, 0xd0},
	{0x03ec, 0x19},
	{0x03ed, 0x80},
	{0x03ef, 0x14},
	{0x03f0, 0xa9},
	{0x03f1, 0x8c},
	{0x03f2, 0x02},
	{0x03f3, 0xb0},
	{0x03f4, 0x94},
	{0x03f5, 0x63},
	{0x03f8, 0x84},
	{0x03f9, 0xac},
	{0x03fc, 0x19},
	{0x03fd, 0xa0},
	{0x03ff, 0x14},
	{0x0400, 0xa9},
	{0x0401, 0xad},
	{0x0402, 0x08},
	{0x0403, 0x20},
	{0x0404, 0xb8},
	{0x0405, 0xc3},
	{0x0407, 0x44},
	{0x0408, 0x19},
	{0x0409, 0x60},
	{0x040b, 0x14},
	{0x040c, 0xa9},
	{0x040d, 0x6b},
	{0x040e, 0x08},
	{0x040f, 0x28},
	{0x0410, 0x8c},
	{0x0411, 0x85},
	{0x0413, 0x3c},
	{0x0414, 0x85},
	{0x0415, 0x0d},
	{0x0418, 0x19},
	{0x0419, 0xe0},
	{0x041b, 0x14},
	{0x041c, 0xa9},
	{0x041d, 0xef},
	{0x041e, 0x08},
	{0x041f, 0x24},
	{0x0420, 0x8c},
	{0x0421, 0x65},
	{0x0423, 0x3a},
	{0x0424, 0x84},
	{0x0425, 0xeb},
	{0x0428, 0xe0},
	{0x0429, 0x66},
	{0x042a, 0x18},
	{0x042b, 0x02},
	{0x042c, 0xd4},
	{0x042d, 0x0f},
	{0x042e, 0x40},
	{0x0430, 0xe5},
	{0x0431, 0xa4},
	{0x0432, 0x18},
	{0x0434, 0x10},
	{0x0437, 0x03},
	{0x0438, 0xd4},
	{0x0439, 0x0d},
	{0x043a, 0x38},
	{0x043c, 0xa8},
	{0x043d, 0x83},
	{0x0440, 0x8c},
	{0x0441, 0x65},
	{0x0443, 0x3b},
	{0x0444, 0xe5},
	{0x0445, 0x64},
	{0x0446, 0x18},
	{0x0448, 0x10},
	{0x044b, 0x03},
	{0x044c, 0x15},
	{0x0450, 0xa8},
	{0x0451, 0x83},
	{0x0454, 0x19},
	{0x0455, 0x40},
	{0x0457, 0x14},
	{0x0458, 0xa9},
	{0x0459, 0x4a},
	{0x045a, 0x01},
	{0x045b, 0xe0},
	{0x045c, 0x94},
	{0x045d, 0xc5},
	{0x045f, 0xfa},
	{0x0460, 0x94},
	{0x0461, 0x6a},
	{0x0464, 0xe4},
	{0x0465, 0xa3},
	{0x0466, 0x30},
	{0x0468, 0x10},
	{0x046b, 0x0f},
	{0x046c, 0x15},
	{0x0470, 0x94},
	{0x0471, 0xa5},
	{0x0473, 0xfc},
	{0x0474, 0xe0},
	{0x0475, 0x63},
	{0x0476, 0x30},
	{0x0477, 0x02},
	{0x0478, 0xe0},
	{0x0479, 0x63},
	{0x047a, 0x2b},
	{0x047b, 0x06},
	{0x047c, 0xb8},
	{0x047d, 0x63},
	{0x047f, 0x44},
	{0x0480, 0xa4},
	{0x0481, 0x63},
	{0x0482, 0xff},
	{0x0483, 0xff},
	{0x0484, 0xbc},
	{0x0485, 0xa3},
	{0x0487, 0x80},
	{0x0488, 0x0c},
	{0x048b, 0x09},
	{0x048c, 0xe4},
	{0x048d, 0xa3},
	{0x048e, 0x20},
	{0x0490, 0x10},
	{0x0493, 0x0b},
	{0x0494, 0x15},
	{0x0498, 0x9c},
	{0x0499, 0x60},
	{0x049f, 0x0a},
	{0x04a0, 0xd4},
	{0x04a1, 0x0b},
	{0x04a2, 0x18},
	{0x04a7, 0x08},
	{0x04a8, 0xd4},
	{0x04a9, 0x0b},
	{0x04aa, 0x20},
	{0x04ac, 0x9c},
	{0x04ad, 0x60},
	{0x04af, 0x80},
	{0x04b0, 0xe4},
	{0x04b1, 0xa3},
	{0x04b2, 0x20},
	{0x04b4, 0x0f},
	{0x04b5, 0xff},
	{0x04b6, 0xff},
	{0x04b7, 0xf9},
	{0x04b8, 0x15},
	{0x04bc, 0xe0},
	{0x04bd, 0x64},
	{0x04be, 0x18},
	{0x04bf, 0x02},
	{0x04c0, 0xd4},
	{0x04c1, 0x0b},
	{0x04c2, 0x18},
	{0x04c4, 0x84},
	{0x04c5, 0x8b},
	{0x04c8, 0x84},
	{0x04c9, 0x6d},
	{0x04cc, 0x84},
	{0x04cd, 0xaf},
	{0x04d0, 0xe0},
	{0x04d1, 0x64},
	{0x04d2, 0x18},
	{0x04d4, 0x9c},
	{0x04d5, 0x80},
	{0x04d7, 0x03},
	{0x04d8, 0x07},
	{0x04d9, 0xfb},
	{0x04da, 0x1c},
	{0x04db, 0xb5},
	{0x04dc, 0xe0},
	{0x04dd, 0x63},
	{0x04de, 0x28},
	{0x04e0, 0x84},
	{0x04e1, 0xcc},
	{0x04e4, 0x9c},
	{0x04e5, 0x60},
	{0x04e6, 0x01},
	{0x04e8, 0xdc},
	{0x04e9, 0x06},
	{0x04ea, 0x58},
	{0x04eb, 0xfe},
	{0x04ec, 0xe0},
	{0x04ed, 0xa3},
	{0x04ee, 0x58},
	{0x04ef, 0x02},
	{0x04f0, 0x94},
	{0x04f1, 0x8a},
	{0x04f4, 0x94},
	{0x04f5, 0x6a},
	{0x04f7, 0x02},
	{0x04f8, 0xe0},
	{0x04f9, 0x85},
	{0x04fa, 0x23},
	{0x04fb, 0x06},
	{0x04fc, 0xe1},
	{0x04fd, 0x63},
	{0x04fe, 0x5b},
	{0x04ff, 0x06},
	{0x0500, 0xe1},
	{0x0501, 0x6b},
	{0x0502, 0x20},
	{0x0504, 0xb9},
	{0x0505, 0x6b},
	{0x0507, 0x48},
	{0x0508, 0xdc},
	{0x0509, 0x06},
	{0x050a, 0x58},
	{0x050b, 0xc4},
	{0x050c, 0x85},
	{0x050d, 0x21},
	{0x0510, 0x85},
	{0x0511, 0x41},
	{0x0513, 0x04},
	{0x0514, 0x85},
	{0x0515, 0x81},
	{0x0517, 0x08},
	{0x0518, 0x44},
	{0x051a, 0x48},
	{0x051c, 0x9c},
	{0x051d, 0x21},
	{0x051f, 0x0c},
	{0x0520, 0x18},
	{0x0521, 0x80},
	{0x0523, 0x14},
	{0x0524, 0xa8},
	{0x0525, 0x84},
	{0x0526, 0x02},
	{0x0527, 0xcc},
	{0x0528, 0x84},
	{0x0529, 0x64},
	{0x052c, 0xbc},
	{0x052d, 0x23},
	{0x052f, 0x41},
	{0x0530, 0x0c},
	{0x0533, 0x06},
	{0x0534, 0xbc},
	{0x0535, 0x23},
	{0x0537, 0x3f},
	{0x0538, 0x10},
	{0x053b, 0x06},
	{0x053c, 0x9c},
	{0x053d, 0x60},
	{0x053f, 0x3e},
	{0x0543, 0x04},
	{0x0544, 0xd4},
	{0x0545, 0x04},
	{0x0546, 0x18},
	{0x0548, 0x9c},
	{0x0549, 0x60},
	{0x054b, 0x42},
	{0x054c, 0xd4},
	{0x054d, 0x04},
	{0x054e, 0x18},
	{0x0550, 0x44},
	{0x0552, 0x48},
	{0x0554, 0x15},
	{0x0558, 0x9c},
	{0x0559, 0x21},
	{0x055a, 0xff},
	{0x055b, 0xe4},
	{0x055c, 0xd4},
	{0x055d, 0x01},
	{0x055e, 0x48},
	{0x0560, 0xd4},
	{0x0561, 0x01},
	{0x0562, 0x50},
	{0x0563, 0x04},
	{0x0564, 0xd4},
	{0x0565, 0x01},
	{0x0566, 0x60},
	{0x0567, 0x08},
	{0x0568, 0xd4},
	{0x0569, 0x01},
	{0x056a, 0x70},
	{0x056b, 0x0c},
	{0x056c, 0xd4},
	{0x056d, 0x01},
	{0x056e, 0x80},
	{0x056f, 0x10},
	{0x0570, 0xd4},
	{0x0571, 0x01},
	{0x0572, 0x90},
	{0x0573, 0x14},
	{0x0574, 0x9c},
	{0x0575, 0x60},
	{0x0578, 0x19},
	{0x0579, 0x80},
	{0x057b, 0x14},
	{0x057c, 0xa9},
	{0x057d, 0x8c},
	{0x057e, 0x02},
	{0x057f, 0xb0},
	{0x0580, 0xdc},
	{0x0581, 0x01},
	{0x0582, 0x18},
	{0x0583, 0x18},
	{0x0584, 0x18},
	{0x0585, 0xa0},
	{0x0586, 0x80},
	{0x0587, 0x14},
	{0x0588, 0x84},
	{0x0589, 0x6c},
	{0x058c, 0xaa},
	{0x058d, 0x05},
	{0x058f, 0x08},
	{0x0590, 0x84},
	{0x0591, 0x83},
	{0x0593, 0xcc},
	{0x0594, 0xaa},
	{0x0595, 0x45},
	{0x0597, 0x09},
	{0x0598, 0xb9},
	{0x0599, 0xc4},
	{0x059b, 0x44},
	{0x059c, 0x07},
	{0x059d, 0xfb},
	{0x059e, 0x18},
	{0x059f, 0x77},
	{0x05a0, 0x8c},
	{0x05a1, 0x63},
	{0x05a3, 0x8a},
	{0x05a4, 0x84},
	{0x05a5, 0x8c},
	{0x05a8, 0x9c},
	{0x05a9, 0x60},
	{0x05ab, 0x0a},
	{0x05ac, 0x07},
	{0x05ad, 0xfb},
	{0x05ae, 0x1b},
	{0x05af, 0x85},
	{0x05b0, 0x8c},
	{0x05b1, 0x84},
	{0x05b3, 0x8b},
	{0x05b4, 0x84},
	{0x05b5, 0x6c},
	{0x05b8, 0xb9},
	{0x05b9, 0x4b},
	{0x05bb, 0x08},
	{0x05bc, 0x8c},
	{0x05bd, 0x83},
	{0x05bf, 0x8b},
	{0x05c0, 0x07},
	{0x05c1, 0xfb},
	{0x05c2, 0x1b},
	{0x05c3, 0x80},
	{0x05c4, 0x9c},
	{0x05c5, 0x60},
	{0x05c7, 0x0b},
	{0x05c8, 0x84},
	{0x05c9, 0x6c},
	{0x05cc, 0xe1},
	{0x05cd, 0x4a},
	{0x05ce, 0x58},
	{0x05d0, 0x8c},
	{0x05d1, 0x83},
	{0x05d3, 0x8b},
	{0x05d4, 0x07},
	{0x05d5, 0xfb},
	{0x05d6, 0x1b},
	{0x05d7, 0x7b},
	{0x05d8, 0x9c},
	{0x05d9, 0x60},
	{0x05db, 0x0a},
	{0x05dc, 0x84},
	{0x05dd, 0x8c},
	{0x05e0, 0x9c},
	{0x05e1, 0x60},
	{0x05e3, 0x0b},
	{0x05e4, 0xd8},
	{0x05e5, 0x10},
	{0x05e6, 0x58},
	{0x05e8, 0x07},
	{0x05e9, 0xfb},
	{0x05ea, 0x1b},
	{0x05eb, 0x76},
	{0x05ec, 0x8c},
	{0x05ed, 0x84},
	{0x05ef, 0x8b},
	{0x05f0, 0xd8},
	{0x05f1, 0x12},
	{0x05f2, 0x58},
	{0x05f4, 0xe0},
	{0x05f5, 0x6a},
	{0x05f6, 0x70},
	{0x05f7, 0x02},
	{0x05f8, 0x84},
	{0x05f9, 0x8c},
	{0x05fc, 0x9d},
	{0x05fd, 0x63},
	{0x05ff, 0x01},
	{0x0600, 0xb8},
	{0x0601, 0x6b},
	{0x0603, 0x48},
	{0x0604, 0xd8},
	{0x0605, 0x01},
	{0x0606, 0x58},
	{0x0607, 0x19},
	{0x0608, 0xd8},
	{0x0609, 0x01},
	{0x060a, 0x18},
	{0x060b, 0x18},
	{0x060c, 0x8c},
	{0x060d, 0xa4},
	{0x060f, 0x8b},
	{0x0610, 0x94},
	{0x0611, 0x64},
	{0x0613, 0x90},
	{0x0614, 0x07},
	{0x0615, 0xfb},
	{0x0616, 0x19},
	{0x0617, 0x90},
	{0x0618, 0x8c},
	{0x0619, 0x81},
	{0x061b, 0x18},
	{0x061c, 0x84},
	{0x061d, 0x6c},
	{0x0620, 0x8c},
	{0x0621, 0x81},
	{0x0623, 0x19},
	{0x0624, 0x8c},
	{0x0625, 0xa3},
	{0x0627, 0x8b},
	{0x0628, 0x07},
	{0x0629, 0xfb},
	{0x062a, 0x19},
	{0x062b, 0x8b},
	{0x062c, 0x94},
	{0x062d, 0x63},
	{0x062f, 0x92},
	{0x0630, 0x84},
	{0x0631, 0x8c},
	{0x0634, 0x9c},
	{0x0635, 0x60},
	{0x0637, 0x09},
	{0x0638, 0x8c},
	{0x0639, 0xa4},
	{0x063b, 0x8b},
	{0x063c, 0x07},
	{0x063d, 0xfb},
	{0x063e, 0x19},
	{0x063f, 0x86},
	{0x0640, 0x9c},
	{0x0641, 0x80},
	{0x0643, 0x01},
	{0x0644, 0x85},
	{0x0645, 0x21},
	{0x0648, 0x85},
	{0x0649, 0x41},
	{0x064b, 0x04},
	{0x064c, 0x85},
	{0x064d, 0x81},
	{0x064f, 0x08},
	{0x0650, 0x85},
	{0x0651, 0xc1},
	{0x0653, 0x0c},
	{0x0654, 0x86},
	{0x0655, 0x01},
	{0x0657, 0x10},
	{0x0658, 0x86},
	{0x0659, 0x41},
	{0x065b, 0x14},
	{0x065c, 0x44},
	{0x065e, 0x48},
	{0x0660, 0x9c},
	{0x0661, 0x21},
	{0x0663, 0x1c},
	{0x0664, 0x9c},
	{0x0665, 0x21},
	{0x0666, 0xff},
	{0x0667, 0xf0},
	{0x0668, 0xd4},
	{0x0669, 0x01},
	{0x066a, 0x48},
	{0x066c, 0xd4},
	{0x066d, 0x01},
	{0x066e, 0x50},
	{0x066f, 0x04},
	{0x0670, 0xd4},
	{0x0671, 0x01},
	{0x0672, 0x60},
	{0x0673, 0x08},
	{0x0674, 0xd4},
	{0x0675, 0x01},
	{0x0676, 0x70},
	{0x0677, 0x0c},
	{0x0678, 0x19},
	{0x0679, 0xc0},
	{0x067b, 0x14},
	{0x067c, 0xa9},
	{0x067d, 0xce},
	{0x067e, 0x02},
	{0x067f, 0xb0},
	{0x0680, 0x85},
	{0x0681, 0x4e},
	{0x0684, 0x84},
	{0x0685, 0x8a},
	{0x0687, 0xd0},
	{0x0688, 0xbc},
	{0x0689, 0xa4},
	{0x068a, 0x03},
	{0x068b, 0xff},
	{0x068c, 0x10},
	{0x068f, 0x04},
	{0x0690, 0x18},
	{0x0691, 0x60},
	{0x0693, 0x02},
	{0x0694, 0x9c},
	{0x0695, 0x80},
	{0x0696, 0x04},
	{0x0698, 0xd4},
	{0x0699, 0x0a},
	{0x069a, 0x20},
	{0x069b, 0xd0},
	{0x069c, 0x07},
	{0x069d, 0xfb},
	{0x069e, 0x1c},
	{0x069f, 0x44},
	{0x06a0, 0x84},
	{0x06a1, 0x8a},
	{0x06a3, 0xd0},
	{0x06a4, 0xb8},
	{0x06a5, 0x8b},
	{0x06a7, 0x48},
	{0x06a8, 0x8c},
	{0x06a9, 0xaa},
	{0x06ab, 0x8b},
	{0x06ac, 0xa9},
	{0x06ad, 0x8b},
	{0x06b0, 0x07},
	{0x06b1, 0xfb},
	{0x06b2, 0x19},
	{0x06b3, 0x69},
	{0x06b4, 0x94},
	{0x06b5, 0x6a},
	{0x06b7, 0xb0},
	{0x06b8, 0x84},
	{0x06b9, 0x6e},
	{0x06bc, 0xa4},
	{0x06bd, 0x8c},
	{0x06bf, 0xff},
	{0x06c0, 0x8c},
	{0x06c1, 0xa3},
	{0x06c3, 0x8b},
	{0x06c4, 0x07},
	{0x06c5, 0xfb},
	{0x06c6, 0x19},
	{0x06c7, 0x64},
	{0x06c8, 0x94},
	{0x06c9, 0x63},
	{0x06cb, 0xb2},
	{0x06cc, 0x84},
	{0x06cd, 0x8e},
	{0x06d0, 0x9c},
	{0x06d1, 0x60},
	{0x06d3, 0x09},
	{0x06d4, 0x8c},
	{0x06d5, 0xa4},
	{0x06d7, 0x8b},
	{0x06d8, 0x07},
	{0x06d9, 0xfb},
	{0x06da, 0x19},
	{0x06db, 0x5f},
	{0x06dc, 0x9c},
	{0x06dd, 0x80},
	{0x06df, 0x01},
	{0x06e0, 0x85},
	{0x06e1, 0x21},
	{0x06e4, 0x85},
	{0x06e5, 0x41},
	{0x06e7, 0x04},
	{0x06e8, 0x85},
	{0x06e9, 0x81},
	{0x06eb, 0x08},
	{0x06ec, 0x85},
	{0x06ed, 0xc1},
	{0x06ef, 0x0c},
	{0x06f0, 0x44},
	{0x06f2, 0x48},
	{0x06f4, 0x9c},
	{0x06f5, 0x21},
	{0x06f7, 0x10},
	{0x06f8, 0x9c},
	{0x06f9, 0x21},
	{0x06fa, 0xff},
	{0x06fb, 0xf4},
	{0x06fc, 0xd4},
	{0x06fd, 0x01},
	{0x06fe, 0x48},
	{0x0700, 0xd4},
	{0x0701, 0x01},
	{0x0702, 0x50},
	{0x0703, 0x04},
	{0x0704, 0xd4},
	{0x0705, 0x01},
	{0x0706, 0x60},
	{0x0707, 0x08},
	{0x0708, 0xbc},
	{0x0709, 0x03},
	{0x070a, 0x01},
	{0x070b, 0x10},
	{0x070c, 0x10},
	{0x070f, 0x17},
	{0x0710, 0xbc},
	{0x0711, 0x43},
	{0x0712, 0x01},
	{0x0713, 0x10},
	{0x0714, 0x0c},
	{0x0717, 0x0b},
	{0x0718, 0xbc},
	{0x0719, 0x03},
	{0x071a, 0x01},
	{0x071b, 0x05},
	{0x071c, 0xbc},
	{0x071d, 0x03},
	{0x071e, 0x04},
	{0x071f, 0x0b},
	{0x0720, 0x10},
	{0x0723, 0x2d},
	{0x0724, 0xbc},
	{0x0725, 0x03},
	{0x0726, 0x04},
	{0x0727, 0x0c},
	{0x0728, 0x19},
	{0x0729, 0x80},
	{0x072b, 0x14},
	{0x072c, 0xa9},
	{0x072d, 0x8c},
	{0x072e, 0x03},
	{0x072f, 0x18},
	{0x0730, 0x0c},
	{0x0733, 0x31},
	{0x0734, 0x15},
	{0x073b, 0x2d},
	{0x073c, 0x15},
	{0x0740, 0x10},
	{0x0743, 0x1f},
	{0x0744, 0xbc},
	{0x0745, 0x03},
	{0x0746, 0x01},
	{0x0747, 0x0c},
	{0x0748, 0x19},
	{0x0749, 0x80},
	{0x074b, 0x14},
	{0x074c, 0xa9},
	{0x074d, 0x8c},
	{0x074e, 0x03},
	{0x074f, 0x18},
	{0x0750, 0x0c},
	{0x0753, 0x29},
	{0x0754, 0x15},
	{0x0758, 0x07},
	{0x0759, 0xff},
	{0x075a, 0xff},
	{0x075b, 0x72},
	{0x075c, 0x15},
	{0x0763, 0x26},
	{0x0764, 0x84},
	{0x0765, 0x6c},
	{0x0768, 0x18},
	{0x0769, 0x60},
	{0x076b, 0x14},
	{0x076c, 0xa8},
	{0x076d, 0x63},
	{0x076e, 0x02},
	{0x076f, 0xb0},
	{0x0770, 0x19},
	{0x0771, 0x40},
	{0x0773, 0x14},
	{0x0774, 0xa9},
	{0x0775, 0x4a},
	{0x0776, 0x02},
	{0x0777, 0xf8},
	{0x0778, 0x84},
	{0x0779, 0x83},
	{0x077c, 0x84},
	{0x077d, 0xaa},
	{0x0780, 0x94},
	{0x0781, 0x64},
	{0x0783, 0x7e},
	{0x0784, 0xe4},
	{0x0785, 0xa3},
	{0x0786, 0x28},
	{0x0788, 0x10},
	{0x078b, 0x04},
	{0x078c, 0x15},
	{0x0790, 0x9c},
	{0x0791, 0x60},
	{0x0793, 0x04},
	{0x0794, 0xd8},
	{0x0795, 0x04},
	{0x0796, 0x18},
	{0x0797, 0xd7},
	{0x0798, 0x19},
	{0x0799, 0x80},
	{0x079b, 0x14},
	{0x079c, 0xa9},
	{0x079d, 0x8c},
	{0x079e, 0x03},
	{0x079f, 0x18},
	{0x07a0, 0x84},
	{0x07a1, 0x6c},
	{0x07a4, 0x07},
	{0x07a5, 0xfb},
	{0x07a6, 0x05},
	{0x07a7, 0xa1},
	{0x07a8, 0x84},
	{0x07a9, 0x63},
	{0x07aa, 0x01},
	{0x07ab, 0xc0},
	{0x07ac, 0x9c},
	{0x07ad, 0x80},
	{0x07ae, 0xff},
	{0x07af, 0xf0},
	{0x07b0, 0xe1},
	{0x07b1, 0x6b},
	{0x07b2, 0x20},
	{0x07b3, 0x03},
	{0x07b7, 0x10},
	{0x07b8, 0xd4},
	{0x07b9, 0x0a},
	{0x07ba, 0x58},
	{0x07bc, 0x19},
	{0x07bd, 0x80},
	{0x07bf, 0x14},
	{0x07c0, 0xa9},
	{0x07c1, 0x8c},
	{0x07c2, 0x03},
	{0x07c3, 0x18},
	{0x07c4, 0x07},
	{0x07c5, 0xff},
	{0x07c6, 0xff},
	{0x07c7, 0x04},
	{0x07c8, 0x15},
	{0x07cf, 0x0b},
	{0x07d0, 0x84},
	{0x07d1, 0x6c},
	{0x07d4, 0x19},
	{0x07d5, 0x80},
	{0x07d7, 0x14},
	{0x07d8, 0xa9},
	{0x07d9, 0x8c},
	{0x07da, 0x03},
	{0x07db, 0x18},
	{0x07dc, 0x07},
	{0x07dd, 0xff},
	{0x07de, 0xff},
	{0x07df, 0x5f},
	{0x07e0, 0x15},
	{0x07e7, 0x05},
	{0x07e8, 0x84},
	{0x07e9, 0x6c},
	{0x07ec, 0x07},
	{0x07ed, 0xff},
	{0x07ee, 0xff},
	{0x07ef, 0x9e},
	{0x07f0, 0x15},
	{0x07f4, 0x84},
	{0x07f5, 0x6c},
	{0x07f8, 0x9d},
	{0x07f9, 0x60},
	{0x07fc, 0xd4},
	{0x07fd, 0x03},
	{0x07fe, 0x59},
	{0x07ff, 0xcc},
	{0x0800, 0xd4},
	{0x0801, 0x03},
	{0x0802, 0x59},
	{0x0803, 0xc0},
	{0x0804, 0xd4},
	{0x0805, 0x03},
	{0x0806, 0x59},
	{0x0807, 0xc4},
	{0x0808, 0xd4},
	{0x0809, 0x03},
	{0x080a, 0x59},
	{0x080b, 0xc8},
	{0x080c, 0x85},
	{0x080d, 0x21},
	{0x0810, 0x85},
	{0x0811, 0x41},
	{0x0813, 0x04},
	{0x0814, 0x85},
	{0x0815, 0x81},
	{0x0817, 0x08},
	{0x0818, 0x44},
	{0x081a, 0x48},
	{0x081c, 0x9c},
	{0x081d, 0x21},
	{0x081f, 0x0c},

	{0x06e, 0x30},   /*magnitude offset*/
	{0x06f, 0x20},   /*magnitude Min*/
	{0x070, 0xc0},   /*magnitude MAX*/
	/*ENABLE*/
	{0xfffe, 0x30},
	{0x0051, 0x03},

	{0xfffe, 0x50},
	{0x0137, 0x99},
	{0xfffe, 0x14},

	/*AE SENSOR  END*/
	/*lenc*/
	{0xfffe, 0x30},/*lenc_200_90%*/
	{0x0200, 0x3f},
	{0x0201, 0x33},
	{0x0202, 0x24},
	{0x0203, 0x24},
	{0x0204, 0x31},
	{0x0205, 0x3f},
	{0x0206, 0xd},
	{0x0207, 0x8 },
	{0x0208, 0x5 },
	{0x0209, 0x5 },
	{0x020a, 0x8 },
	{0x020b, 0xe },
	{0x020c, 0x6 },
	{0x020d, 0x2 },
	{0x020e, 0x0 },
	{0x020f, 0x0 },
	{0x0210, 0x2 },
	{0x0211, 0x7 },
	{0x0212, 0x6 },
	{0x0213, 0x2 },
	{0x0214, 0x0 },
	{0x0215, 0x0 },
	{0x0216, 0x2 },
	{0x0217, 0x7 },
	{0x0218, 0xe },
	{0x0219, 0x8 },
	{0x021a, 0x6 },
	{0x021b, 0x6 },
	{0x021c, 0x9 },
	{0x021d, 0xe },
	{0x021e, 0x3f},
	{0x021f, 0x27},
	{0x0220, 0x1e},
	{0x0221, 0x1d},
	{0x0222, 0x25},
	{0x0223, 0x3f},
	{0x0224, 0x26},
	{0x0225, 0x14 },
	{0x0226, 0x4 },
	{0x0227, 0x14 },
	{0x0228, 0x15},
	{0x022a, 0x12},
	{0x022b, 0x12},
	{0x022c, 0x12},
	{0x022d, 0x12},
	{0x022e, 0x02},
	{0x0230, 0x12},
	{0x0231, 0x11},
	{0x0232, 0x11},
	{0x0233, 0x11},
	{0x0234, 0x1},
	{0x0236, 0x12},
	{0x0237, 0x12},
	{0x0238, 0x12},
	{0x0239, 0x2},
	{0x023a, 0x2},
	{0x023c, 0x35},
	{0x023d, 0x4},
	{0x023e, 0x14},
	{0x023f, 0x04},
	{0x0240, 0x15},
	{0x0248, 0xff},

	{0xfffe, 0x30},
	{0x024d, 0x00},
	{0x024e, 0xCC},
	{0x024f, 0x01},
	{0x0250, 0x6C},
	{0x0251, 0x01},
	{0x0252, 0x11},
	{0x0253, 0x00},
	{0x0254, 0xF2},
	{0xfffe, 0x30},
	{0x0013, 0x06},
	/*AWB  */
	{0xfffe, 0x14}, /*AWB_init     */
	{0x0027, 0x01},/*firmware awb_enable  */
	{0x013c, 0x02},/*0.AWB_ARITH_ORIGIN  1.AWB_SW_PRO  2.AWB_ARITH_MANUAL */
	{0x0176, 0x07}, /*int B gain */
	{0x0177, 0x70},
	{0x017a, 0x04},/*int Gb gain */
	{0x017b, 0x00},
	{0x017e, 0x04}, /*int Gr gain */
	{0x017f, 0x00},
	{0x0182, 0x06}, /*int R gain */
	{0x0183, 0x21},
	{0x01aa, 0x07},  /*B_temp      */
	{0x01ab, 0x70},
	{0x01ae, 0x04},  /*G_ temp   */
	{0x01af, 0x00},
	{0x01b2, 0x06}, /*R_temp   */
	{0x01b3, 0x21},

	{0xfffe, 0x14},   /*C_AWB */
	{0x0027, 0x00},  /*firmware awb_enable */
	{0x013c, 0x01},  /*0.AWB_ARITH_ORIGIN  1.AWB_SW_PRO  2.AWB_ARITH_MANUAL */
	{0x013d, 0x01},  /*AWBFlexiMap_en */
	{0x013e, 0x00},  /*AWBMove_en */
	{0x0170, 0x0d},  /*nMaxAwbGain */
	{0x0171, 0xff},

	{0xfffe, 0x30},
	{0x0708, 0x03}, /*pixel max value[9:8] */
	{0x0709, 0xf0}, /*pixel max value[7:0] */
	{0x070a, 0x00}, /*pixel min value[9:8]  */
	{0x070b, 0x0c}, /*pixel min value[7:0]  */
	{0x0001, 0x65},
	{0x0003, 0xe5},
	{0x0051, 0x03},
	{0x0096, 0x83},
	{0x0019, 0x48},
	{0x071c, 0x0a},  /*Simple_awb_en[4]: 0¡¯b0: simple awb mode disenable 1¡¯b1: simple awb mode enable */

	{0xfffe, 0x14},
	{0x016e, 0x08},

	{0xfffd, 0x80},  /*AWB_4*/
	{0xfffe, 0x30},
	{0x0000, 0x4f},
	{0x0001, 0xa5},
	{0x0003, 0xe5},

	{0x0730, 0x86},  /*win1 startx*/
	{0x0731, 0xa9}, /* win1 endx*/
	{0x0732, 0x3f},  /*win1 starty*/
	{0x0733, 0x4c},  /* win1 endy*/
	{0x0734, 0x7c},  /* win2 startx*/
	{0x0735, 0x9a},  /*win2 endx*/
	{0x0736, 0x54}, /*win2 starty*/
	{0x0737, 0x65},  /* win2 endy*/
	{0x0738, 0x5b},  /* win3 startx*/
	{0x0739, 0x71},  /* win3 endx*/
	{0x073a, 0x64},  /* win3 starty*/
	{0x073b, 0x7b},  /* win3 endy*/
	{0x073c, 0x7a}, /* win4 startx*/
	{0x073d, 0x98},  /* win4 endx*/
	{0x073e, 0x4a},  /*win4 starty*/
	{0x073f, 0x56},  /* win4 endy*/
	{0x0740, 0x70},  /*win5 startx*/
	{0x0741, 0x7e}, /* win5 endx*/
	{0x0742, 0x63},  /*win5 starty*/
	{0x0743, 0x70}, /* win5 endy*/
	{0x0744, 0x00},  /*win6 startx*/
	{0x0745, 0x00},  /* win6 endx*/
	{0x0746, 0x00},  /* win6 starty*/
	{0x0747, 0x00},  /*win6 endy*/
	{0x0748, 0x00},  /* win7 startx*/
	{0x0749, 0x00},  /*win7 endx*/
	{0x074a, 0x00}, /*win7 starty*/
	{0x074b, 0x00},  /*win7 endy*/
	{0x074c, 0x00},  /* win8 startx*/
	{0x074d, 0x00},  /* win8 endx*/
	{0x074e, 0x00},  /* win8 starty*/
	{0x074f, 0x00},  /* win8 endy*/
	{0x0750, 0x00},  /* win9 startx*/
	{0x0751, 0x00}, /* win9 endx*/
	{0x0752, 0x00},  /* win9 starty*/
	{0x0753, 0x00},  /* win9 endy*/
	{0x0754, 0x00},  /* win10 startx*/
	{0x0755, 0x00},  /* win10 endx*/
	{0x0756, 0x00},  /* win10 starty*/
	{0x0757, 0x00}, /* win10 endy*/
	{0x0758, 0x00},  /*win11 startx*/
	{0x0759, 0x00}, /*win11 endx*/
	{0x075a, 0x00},  /* win11 starty*/
	{0x075b, 0x00},  /*win11 endy*/
	{0x075c, 0x00}, /* win12 startx*/
	{0x075d, 0x00},  /* win12 endx*/
	{0x075e, 0x00},  /* win12 starty*/
	{0x075f, 0x00}, /* win12 endy*/
	{0x0760, 0x00}, /* win13 startx*/
	{0x0761, 0x00},  /* win13 endx*/
	{0x0762, 0x00}, /*win13 starty*/
	{0x0763, 0x00},  /* win13 endy*/
	{0x0764, 0x00},  /* win14 startx*/
	{0x0765, 0x00}, /* win14 endx*/
	{0x0766, 0x00}, /* win14 starty*/
	{0x0767, 0x00},  /*win14 endy*/
	{0x0768, 0x00},  /* win15 startx*/
	{0x0769, 0x00},  /* win15 endx*/
	{0x076a, 0x00}, /* win15 starty*/
	{0x076b, 0x00},  /* win15 endy*/
	{0x076c, 0x00},  /* win16 startx*/
	{0x076d, 0x00},  /* win16 endx*/
	{0x076e, 0x00}, /* win16 starty*/
	{0x076f, 0x00},  /* win16 endy*/
	{0x0770, 0x22},  /* wt1 wt2*/
	{0x0771, 0x21}, /* wt3 wt4*/
	{0x0772, 0x10},  /* wt5 wt6*/
	{0x0773, 0x00},  /* wt7 wt8*/
	{0x0774, 0x00}, /* wt9 wt10*/
	{0x0775, 0x00},  /* wt11 wt12*/
	{0x0776, 0x00},  /* wt13 wt14*/
	{0x0777, 0x00},  /* wt15 wt16*/

	/*gamma*/
	{0xfffd, 0x80},  /*Nathan5*/
	{0xfffe, 0x30},
	{0x1400, 0x00},
	{0x1401, 0x05},
	{0x1402, 0x0a},
	{0x1403, 0x0f},
	{0x1404, 0x15},
	{0x1405, 0x1a},
	{0x1406, 0x1f},
	{0x1407, 0x24},
	{0x1408, 0x29},
	{0x1409, 0x2e},
	{0x140a, 0x32},
	{0x140b, 0x37},
	{0x140c, 0x3c},
	{0x140d, 0x40},
	{0x140e, 0x45},
	{0x140f, 0x49},
	{0x1410, 0x4e},
	{0x1411, 0x52},
	{0x1412, 0x56},
	{0x1413, 0x5a},
	{0x1414, 0x5e},
	{0x1415, 0x62},
	{0x1416, 0x65},
	{0x1417, 0x69},
	{0x1418, 0x6c},
	{0x1419, 0x6f},
	{0x141a, 0x73},
	{0x141b, 0x76},
	{0x141c, 0x79},
	{0x141d, 0x7c},
	{0x141e, 0x7e},
	{0x141f, 0x81},
	{0x1420, 0x84},
	{0x1421, 0x89},
	{0x1422, 0x8d},
	{0x1423, 0x92},
	{0x1424, 0x96},
	{0x1425, 0x9a},
	{0x1426, 0x9d},
	{0x1427, 0xa1},
	{0x1428, 0xa4},
	{0x1429, 0xa7},
	{0x142a, 0xaa},
	{0x142b, 0xad},
	{0x142c, 0xaf},
	{0x142d, 0xb2},
	{0x142e, 0xb4},
	{0x142f, 0xb6},
	{0x1430, 0xb8},
	{0x1431, 0xbc},
	{0x1432, 0xc0},
	{0x1433, 0xc4},
	{0x1434, 0xc8},
	{0x1435, 0xcc},
	{0x1436, 0xd0},
	{0x1437, 0xd4},
	{0x1438, 0xd8},
	{0x1439, 0xdd},
	{0x143a, 0xe1},
	{0x143b, 0xe6},
	{0x143c, 0xeb},
	{0x143d, 0xf0},
	{0x143e, 0xf5},
	{0x143f, 0xfa},
	{0x1440, 0xff},

	{0xfffe, 0x30},  /*Setting_A_Rb+0.2_Br+0.1_Bg-0.2_Gb-0.4_Rg-0.2.txt*/

	{0x1200, 0x09},
	{0x1201, 0x09},
	{0x1202, 0x00},
	{0x1203, 0x0D},
	{0x1204, 0x01},
	{0x1205, 0x2A},
	{0x1206, 0x01},
	{0x1207, 0x2D},
	{0x1208, 0x01},
	{0x1209, 0x42},
	{0x120A, 0x03},
	{0x120B, 0x86},
	{0x120C, 0x0E},
	{0x120D, 0x6B},
	{0x120E, 0x02},
	{0x120F, 0x49},
	{0x1210, 0x04},
	{0x1211, 0x5F},
	{0x1212, 0x02},
	{0x1213, 0x14},
	{0x1214, 0x00},
	{0x1215, 0x04},
	{0x1216, 0x01},
	{0x1217, 0x99},
	{0x1218, 0x0C},
	{0x1219, 0xBC},
	{0x121A, 0x00},
	{0x121B, 0x10},
	{0x121C, 0x01},
	{0x121D, 0x30},
	{0x121E, 0x02},
	{0x121F, 0x0D},
	{0x1220, 0x00},
	{0x1221, 0x01},
	{0x1222, 0x04},
	{0x1223, 0x1B},
	{0x122e, 0x02},
	{0x122F, 0x00},
	{0x1230, 0x10},
	{0x0D31, 0x03},
	{0x1228, 0x00},
	{0x1229, 0x69},
	{0x122A, 0x00},
	{0x122B, 0xB3},
	{0x122C, 0x01},
	{0x122D, 0x06},

	{0xfffe, 0x30},
	{0x1231, 0x02},

	{0xfffe, 0x30},   /*/YEE*/
	{0x2000, 0x30},   /*/bit[5]Yedge en; bit[3]UV_dns_en; bit[2]pre_dns_en; bit[1]ydns_man; bit[0]uvdns_man*/
	{0x2001, 0x15},   /*/edge_ratio*/
	{0x2002, 0x00},   /*/Y_dns_level_man*/
	{0x2003, 0x02},   /*/UV_dns_level_man*/
	{0x2004, 0x01},   /*/gain list0*/
	{0x2005, 0x01},
	{0x2006, 0x02},
	{0x2007, 0x03},
	{0x2008, 0x04},
	{0x2009, 0x05},
	{0x200a, 0x06},
	{0x200b, 0x1f}, /*/gain list7*/

	{0x1907, 0x3a}, /*/y_win+2*/
	{0x1908, 0x01}, /*/win_man_en*/

	{0xfffe, 0x30}, /*/RAW_DNS*/
	{0x0e00, 0x14}, /*/34 //bit[5] Para_man_en  bit[4]G_en*/
	{0x0e01, 0x08}, /*/06 //noise list0*/
	{0x0e02, 0x0f}, /*/0c*/
	{0x0e03, 0x14}, /*/10*/
	{0x0e04, 0x24}, /*/20*/
	{0x0e05, 0x34}, /*/30*/
	{0x0e06, 0x38},
	{0x0e07, 0x38},
	{0x0e08, 0x38}, /*/noise list7*/
	{0x0e09, 0x3f}, /*/max_edge_thre*/
	{0x0e0a, 0x18}, /*/noise_man*/
	{0x0e0b, 0x20}, /*/edgethre_man*/

	{0xfffe, 0x30}, /*/RGB_DNS*/
	{0x130e, 0x02}, /*/bit[3] Para_man_en  bit[2:0]Y_noise_man*/
	{0x130f, 0x08}, /*/ bit[5:0]UV_noise_man*/

	{0xfffe, 0x30}, /*/cip*/
	{0x0f00, 0x8f}, /*/bit[7:4] noise_y_slp  bit[3:0] Lsharp */
	{0x0f01, 0x00},
	{0x0f02, 0x08}, /*/noise list0*/
	{0x0f03, 0x0f},
	{0x0f04, 0x14},
	{0x0f05, 0x24},
	{0x0f06, 0x34},
	{0x0f07, 0x38},
	{0x0f08, 0x38},
	{0x0f09, 0x38},  /*/noise list7*/
	{0x0f0a, 0x02},  /*/min_shp*/
	{0x0f0b, 0x12},  /*/max_shp*/
	{0x0f0c, 0x04},  /*/min_detail*/
	{0x0f0d, 0x12},  /*/max_detail*/
	{0x0f0e, 0x02},  /*/min_shp_gain*/
	{0x0f0f, 0x10},  /*/max_shp_gain*/

	{0xfffe, 0x14},/*/saturation adjust*/
	{0x0160, 0x00},/*/bAutoSat_en*/
	{0x0162, 0x40},/*/sat_u[0]*/
	{0x0163, 0x38},/*/sat_u[1]*/
	{0x0164, 0x30},/*/sat_u[2]*/
	{0x0165, 0x2c},/*/sat_u[3]*/
	{0x0166, 0x28},/*/sat_u[4]*/
	{0x0167, 0x24},/*/sat_u[5]*/
	{0x0168, 0x44},/*/sat_v[0] */
	{0x0169, 0x3c},/*/sat_v[1] */
	{0x016a, 0x34},/*/sat_v[2] */
	{0x016b, 0x30},/*/sat_v[3] */
	{0x016c, 0x2c},/*/sat_v[4] */
	{0x016d, 0x28},/*/sat_v[5]*/

	/*TOP */
	{0xfffe, 0x30},
	{0x0000, 0x47},
	{0x0001, 0x85},  /*/a7*/
	{0x0003, 0xe5},
	{0x0013, 0x00},
	{0x071c, 0x0a},
	{0x1700, 0x09},
	{0x1701, 0x4d},
	{0x1702, 0x4d},
	{0x1704, 0x1f},
	{0xfffe, 0x14},
	{0x0027, 0x01},

};

static struct regval_list xc7021_720p_regs_25fps[] = {

	{0xfffd, 0x80},
	{0xfffe, 0x50},
	{0x001c, 0xff},
	{0x001d, 0xff},
	{0x001e, 0xff},
	{0x001f, 0xff},  /*cl*/
	{0x0018, 0x00},
	{0x0019, 0x00},
	{0x001a, 0x00},
	{0x001b, 0x00},
	{0x00bc, 0x11},  /*pa*/
	{0x00bd, 0x00},
	{0x00be, 0x00},
	{0x00bf, 0x00},

	/* change page to 50 page*/
	{0xfffe, 0x50},
	/* setting of ISP for pin drive capability */
	{0x00aa, 0x10},/* pclk drive capability  00, 10, 20, 30*/
	{0x00ac, 0x10},/* data pin drive capability  00, 10, 20, 30*/
	{0x00ad, 0x10},/* data pin drive capability  00, 10, 20, 30*/
	{0x00ae, 0x10},/* data pin drive capability  00, 10, 20, 30*/
	{0x00af, 0x10},/* data pin drive capability  00, 10, 20, 30*/

	{0x0030, 0x9},
	{0x0031, 0x2},
	{0x0032, 0xA},
	{0x0020, 0x1},
	{0x0021, 0xE},
	{0x0023, 0x2},
	{0x0024, 0x6},
	{0x0025, 0x6},
	{0x0026, 0x1},
	{0x0027, 0x6},
	{0x0028, 0x8},
	{0x0029, 0x6},
	{0xfffe, 0x30},
	{0x0005, 0x08},
	{0xfffe, 0x50},
	{0x0200, 0x03},
	{0x0204, 0x03},
	{0x0208, 0x02},
	{0x0208, 0x01},
	{0xfffe, 0x30},
	{0x1f00, 0x00},
	{0x1f01, 0x00},
	{0x1f02, 0x00},
	{0x1f03, 0x00},
	{0x1f04, 0x07},
	{0x1f05, 0x00},
	{0x1f06, 0x04},
	{0x1f07, 0x00},

	{0xfffd, 0x80},
	{0xfffe, 0x50},
	{0x00bc, 0x11},
	{0x001b, 0x0 },
	{0x0090, 0x29},

	{0xfffe, 0x20},
	{0x0000, 0x00},
	{0x0004, 0x7},
	{0x0005, 0x80},
	{0x0006, 0x4},
  {0x0007, 0x38},

	{0xfffe, 0x26},
	{0x4000, 0xF9},
	{0x6001, 0x14},
	{0x6005, 0xc4},
	{0x6006, 0xA},
	{0x6007, 0x8C},
	{0x6008, 0x9},
  {0x6009, 0xFC},

	{0x8000, 0x3f},
	{0x8001, 0x80},
	{0x8002, 0x7},
	{0x8003, 0x38},
	{0x8004, 0x4},
	{0x8005, 0x3},
	{0x8006, 0x5},
	{0x8007, 0x99},
  {0x8008, 0x14},

	{0x8010, 0x5 },
	{0x8012, 0x40},
	{0x8013, 0x5 },
	{0x8014, 0xF4},
	{0x8015, 0x2 },
	{0x8016, 0x20},
	{0x8017, 0x1},
	{0x8018, 0xA2},
  {0x8019, 0x0 },

	{0xfffe, 0x30},
  {0x0000, 0x4f},
	{0x0001, 0x91},
  {0x0002, 0x00},
	{0x0003, 0xe5},
	{0x0004, 0x18},
	{0x0006, 0x5},
	{0x0007, 0x40},
	{0x0008, 0x2 },
	{0x0009, 0xF4},
	{0x000a, 0x5},
	{0x000b, 0x0 },
	{0x000c, 0x2 },
	{0x000d, 0xD0},
	{0x0027, 0xF1},
	{0x005e, 0x5},
	{0x005f, 0x3F},
	{0x0060, 0x2},
	{0x0061, 0xF3},
	{0x1908, 0x0},
	{0x1900, 0x0},
	{0x1901, 0x0},
	{0x1902, 0x0},
	{0x1903, 0x0},
	{0x1904, 0x5},
	{0x1905, 0x40},
	{0x1906, 0x2},
	{0x1907, 0xF4},
	{0x1908, 0x00},

 /*banding*/
	{0x00b4, 0x02},    /* banding mode*/
	{0x00b8, 0x0A},    /*banding  exposure lines*/
	{0x00b9, 0xA0},
};

static struct regval_list  xc7021_480p_regs_25fps[] = {
		{0xfffd, 0x80},
		{0xfffe, 0x50},
		{0x001c, 0xff},
		{0x001d, 0xff},
		{0x001e, 0xff},
		{0x001f, 0xff},
		{0x0018, 0x00},
		{0x0019, 0x00},
		{0x001a, 0x00},
		{0x001b, 0x00},
		{0x00bc, 0x11},
		{0x00bd, 0x00},
		{0x00be, 0x00},
		{0x00bf, 0x00},

		/* change page to 50 page*/
		{0xfffe, 0x50},
		/* setting of ISP for pin drive capability */
		{0x00aa, 0x10},/* pclk drive capability  00, 10, 20, 30*/
		{0x00ac, 0x10},/* data pin drive capability  00, 10, 20, 30*/
		{0x00ad, 0x10},/* data pin drive capability  00, 10, 20, 30*/
		{0x00ae, 0x10},/* data pin drive capability  00, 10, 20, 30*/
		{0x00af, 0x10},/* data pin drive capability  00, 10, 20, 30*/

		{0x0030, 0x09},
		{0x0031, 0x02},
		{0x0032, 0xA},
		{0x0020, 0x01},
		{0x0021, 0xE},
		{0x0023, 0x2},
		{0x0024, 0x6},
		{0x0025, 0x6},
		{0x0026, 0x1},
		{0x0027, 0x6},
		{0x0028, 0x8},
		{0x0029, 0x6},
		{0xfffe, 0x30},
		{0x0005, 0x08},
		{0xfffe, 0x50},
		{0x0200, 0x03},
		{0x0204, 0x03},
		{0x0208, 0x02},
		{0x0208, 0x01},

		{0xfffe, 0x30},
		{0x1f00, 0x00},
		{0x1f01, 0x00},
		{0x1f02, 0x00},
		{0x1f03, 0x00},
		{0x1f04, 0x05},
		{0x1f05, 0xa0},
		{0x1f06, 0x04},
		{0x1f07, 0x38},

		{0xfffd, 0x80},
		{0xfffe, 0x50},
		{0x00bc, 0x11},
		{0x001b, 0x00},
		{0x0090, 0x29},

		{0xfffe, 0x20},
		{0x0000, 0x00},
		{0x0004, 0x07},
		{0x0005, 0x80},
		{0x0006, 0x04},
		{0x0007, 0x40},

		{0xfffe, 0x26},
		{0x4000, 0xF9},
		{0x6001, 0x14},
		{0x6005, 0xc4},
		{0x6006, 0x05},
		{0x6007, 0x78},
		{0x6008, 0x04},
		{0x6009, 0xFC},

		{0x8000, 0x3f},
		{0x8001, 0x80},
		{0x8002, 0x07},
		{0x8003, 0x40},
		{0x8004, 0x04},
		{0x8005, 0x03},
		{0x8006, 0x05},
		{0x8007, 0x99},
		{0x8008, 0x14},

		{0x8010, 0x05},
		{0x8012, 0xA0},
		{0x8013, 0x05},
		{0x8014, 0x38},
		{0x8015, 0x04},
		{0x8016, 0xF0},
		{0x8017, 0x00},
		{0x8018, 0x04},
		{0x8019, 0x00},
		{0xfffe, 0x30},
		{0x0000, 0x4f},
		{0x0001, 0x91},
		{0x0002, 0x00},
		{0x0003, 0xe5},
		{0x0004, 0x18},
		{0x0006, 0x05},
		{0x0007, 0xA0},
		{0x0008, 0x04},
		{0x0009, 0x38},
		{0x000a, 0x02},
		{0x000b, 0x80},
		{0x000c, 0x01},
		{0x000d, 0xE0},
		{0x0027, 0xF1},
		{0x005e, 0x05},
		{0x005f, 0x9F},
		{0x0060, 0x04},
		{0x0061, 0x37},
		{0x1908, 0x01},
		{0x1900, 0x00},
		{0x1901, 0x00},
		{0x1902, 0x00},
		{0x1903, 0x00},
		{0x1904, 0x05},
		{0x1905, 0xA0},
		{0x1906, 0x04},
		{0x1907, 0x38},
		{0x1908, 0x00},
		/*banding*/
		{0x00b4, 0x02},    /* banding mode*/
		{0x00b8, 0x0A},    /* banding  exposure lines*/
		{0x00b9, 0xA0},
};

static struct regval_list  xc7021_360p_regs_25fps[] = {
	{0xfffd, 0x80},
	{0xfffe, 0x50},
	{0x001c, 0xff},
	{0x001d, 0xff},
	{0x001e, 0xff},
	{0x001f, 0xff},
	{0x0018, 0x00},
	{0x0019, 0x00},
	{0x001a, 0x00},
	{0x001b, 0x00},
	{0x00bc, 0x11},
	{0x00bd, 0x00},
	{0x00be, 0x00},
	{0x00bf, 0x00},
	{0x0030, 0x9},
	{0x0031, 0x2},
	{0x0032, 0xA},
	{0x0020, 0x1},
	{0x0021, 0xE},
	{0x0023, 0x2},
	{0x0024, 0x6},
	{0x0025, 0x6},
	{0x0026, 0x1},
	{0x0027, 0x6},
	{0x0028, 0x8},
	{0x0029, 0x6},

	/* change page to 50 page*/
	{0xfffe, 0x50},
	/* setting of ISP for pin drive capability */
	{0x00aa, 0x10},/* pclk drive capability  00, 10, 20, 30*/
	{0x00ac, 0x10},/* data pin drive capability  00, 10, 20, 30*/
	{0x00ad, 0x10},/* data pin drive capability  00, 10, 20, 30*/
	{0x00ae, 0x10},/* data pin drive capability  00, 10, 20, 30*/
	{0x00af, 0x10},/* data pin drive capability  00, 10, 20, 30*/

	{0xfffe, 0x30},
	{0x0005, 0x08},
	{0xfffe, 0x50},
	{0x0200, 0x03},
	{0x0204, 0x03},
	{0x0208, 0x02},
	{0x0208, 0x01},
	{0xfffe, 0x30},
	{0x1f00, 0x00},
	{0x1f01, 0x00},
	{0x1f02, 0x00},
	{0x1f03, 0x00},
	{0x1f04, 0x07},
	{0x1f05, 0x80},
	{0x1f06, 0x04},
	{0x1f07, 0x38},
	{0xfffd, 0x80},
	{0xfffe, 0x50},
	{0x00bc, 0x11},
	{0x001b, 0x00},
	{0x0090, 0x29},
	{0xfffe, 0x20},
	{0x0000, 0x00},
	{0x0004, 0x07},
	{0x0005, 0x80},
	{0x0006, 0x04},
	{0x0007, 0x40},
	{0xfffe, 0x26},
	{0x4000, 0xF9},
	{0x6001, 0x14},
	{0x6005, 0xc4},
	{0x6006, 0x05},
	{0x6007, 0x78},
	{0x6008, 0x04},
	{0x6009, 0xFC},
	{0x8000, 0x3f},
	{0x8001, 0x80},
	{0x8002, 0x07},
	{0x8003, 0x40},
	{0x8004, 0x04},
	{0x8005, 0x03},
	{0x8006, 0x05},
	{0x8007, 0x99},
	{0x8008, 0x14},
	{0x8010, 0x5},
	{0x8012, 0x80},
	{0x8013, 0x07},
	{0x8014, 0x38},
	{0x8015, 0x04},
	{0x8016, 0x00},
	{0x8017, 0x00},
	{0x8018, 0x04},
	{0x8019, 0x00},
	{0xfffe, 0x30},
	{0x0000, 0x4f},
	{0x0001, 0x91},
	{0x0002, 0x00},
	{0x0003, 0xe5},
	{0x0004, 0x18},
	{0x0006, 0x07},
	{0x0007, 0x80},
	{0x0008, 0x04},
	{0x0009, 0x38},
	{0x000a, 0x02},
	{0x000b, 0x80},
	{0x000c, 0x01},
	{0x000d, 0x68},
	{0x0027, 0xF1},
	{0x005e, 0x07},
	{0x005f, 0x7F},
	{0x0060, 0x04},
	{0x0061, 0x37},
	{0x1908, 0x00},
	{0x1900, 0x00},
	{0x1901, 0x00},
	{0x1902, 0x00},
	{0x1903, 0x00},
	{0x1904, 0x07},
	{0x1905, 0x80},
	{0x1906, 0x04},
	{0x1907, 0x38},
	{0x1908, 0x00},
    /*banding*/
	{0x00b4, 0x02},    /* banding mode*/
	{0x00b8, 0x0A},    /*banding  exposure lines*/
	{0x00b9, 0xA0},
};
static struct regval_list xc7021_1080p_regs_15fps[] = {

	{0xfffd, 0x80},
	{0xfffe, 0x50},
	{0x001c, 0xff},
	{0x001d, 0xff},
	{0x001e, 0xff},
	{0x001f, 0xff},
	{0x0018, 0x00},
	{0x0019, 0x00},
	{0x001a, 0x00},
	{0x001b, 0x00},
	{0x00bc, 0x11},
	{0x00bd, 0x00},
	{0x00be, 0x00},
	{0x00bf, 0x00},
	{0x0030, 0x9},
	{0x0031, 0x2},
	{0x0032, 0xA},
	{0x0020, 0x1},
	{0x0021, 0xE},
	{0x0023, 0x2},
	{0x0024, 0xA},
	{0x0025, 0x6},
	{0x0026, 0x1},
	{0x0027, 0x6},
	{0x0028, 0x8},
	{0x0029, 0x6},

	/* change page to 50 page*/
	{0xfffe, 0x50},
	/* setting of ISP for pin drive capability */
	{0x00aa, 0x10},/* pclk drive capability  00, 10, 20, 30*/
	{0x00ac, 0x10},/* data pin drive capability  00, 10, 20, 30*/
	{0x00ad, 0x10},/* data pin drive capability  00, 10, 20, 30*/
	{0x00ae, 0x10},/* data pin drive capability  00, 10, 20, 30*/
	{0x00af, 0x10},/* data pin drive capability  00, 10, 20, 30*/

	{0xfffe, 0x30},
	{0x0005, 0x08},
	{0xfffe, 0x50},
	{0x0200, 0x03},
	{0x0204, 0x03},
	{0x0208, 0x02},
	{0x0208, 0x01},
	{0xfffd, 0x80},
	{0xfffe, 0x50},
	{0x00bc, 0x11},
	{0x001b, 0x0,},
	{0x0090, 0x29},
	{0xfffe, 0x20},
	{0x0000, 0x00},
	{0x0004, 0x07},
	{0x0005, 0x80},
	{0x0006, 0x04},
	{0x0007, 0x40},
	{0xfffe, 0x26},
	{0x4000, 0xF9},
	{0x6001, 0x14},
	{0x6005, 0xc4},
	{0x6006, 0x0F},
	{0x6007, 0xA0},
	{0x6008, 0x0E},
	{0x6009, 0xFC},
	{0x8000, 0x3f},
	{0x8001, 0x80},
	{0x8002, 0x7},
	{0x8003, 0x40},
	{0x8004, 0x4},
	{0x8005, 0x3},
	{0x8006, 0x5},
	{0x8007, 0x99},
	{0x8008, 0x14},
	{0x8010, 0x05},
	{0x8012, 0x80},
	{0x8013, 0x07},
	{0x8014, 0x38},
	{0x8015, 0x04},
	{0x8016, 0x00},
	{0x8017, 0x00},
	{0x8018, 0x00},
	{0x8019, 0x00},
	{0xfffe, 0x30},
	{0xfffe, 0x30},
	{0x0000, 0x4f},
	{0x0001, 0x85},
	{0x0003, 0xe5},
	{0x0004, 0x18},
	{0x0006, 0x07},
	{0x0007, 0x80},
	{0x0008, 0x04},
	{0x0009, 0x38},
	{0x000a, 0x07},
	{0x000b, 0x80},
	{0x000c, 0x04},
	{0x000d, 0x38},
	{0x0027, 0xF7},
	{0x005e, 0x07},
	{0x005f, 0x7F},
	{0x0060, 0x04},
	{0x0061, 0x37},
	{0x1908, 0x00},
	{0x1900, 0x00},
	{0x1901, 0x00},
	{0x1902, 0x00},
	{0x1903, 0x00},
	{0x1904, 0x07},
	{0x1905, 0x80},
	{0x1906, 0x04},
	{0x1907, 0x38},
	/*banding*/
	{0x00b4, 0x02},    /* banding mode*/
	{0x00b8, 0x06},    /* banding  exposure lines*/
	{0x00b9, 0x60},
};

static struct regval_list xc7021_720p_regs_15fps[] = {
	{0xfffd, 0x80},
	{0xfffe, 0x50},
	{0x001c, 0xff},
	{0x001d, 0xff},
	{0x001e, 0xff},
	{0x001f, 0xff},
	{0x0018, 0x00},
	{0x0019, 0x00},
	{0x001a, 0x00},
	{0x001b, 0x00},
	{0x00bc, 0x11},
	{0x00bd, 0x00},
	{0x00be, 0x00},
	{0x00bf, 0x00},
	{0x0030, 0x9},
	{0x0031, 0x2},
	{0x0032, 0xA},
	{0x0020, 0x1},
	{0x0021, 0xE},
	{0x0023, 0x2},
	{0x0024, 0xA},
	{0x0025, 0x6},
	{0x0026, 0x1},
	{0x0027, 0x6},
	{0x0028, 0x8},
	{0x0029, 0x6},

	/* change page to 50 page*/
	{0xfffe, 0x50},
	/* setting of ISP for pin drive capability */
	{0x00aa, 0x10},/* pclk drive capability  00, 10, 20, 30*/
	{0x00ac, 0x10},/* data pin drive capability  00, 10, 20, 30*/
	{0x00ad, 0x10},/* data pin drive capability  00, 10, 20, 30*/
	{0x00ae, 0x10},/* data pin drive capability  00, 10, 20, 30*/
	{0x00af, 0x10},/* data pin drive capability  00, 10, 20, 30*/

	{0xfffe, 0x30},
	{0x0005, 0x08},

	{0xfffe, 0x50},
	{0x0200, 0x03},
    {0x0204, 0x03},
    {0x0208, 0x02},
    {0x0208, 0x01},

    {0xfffe, 0x30},
    {0x1f00, 0x00},
    {0x1f01, 0x00},
    {0x1f02, 0x00},
    {0x1f03, 0x00},
    {0x1f04, 0x07},
    {0x1f05, 0x00},
    {0x1f06, 0x04},
    {0x1f07, 0x00},

    {0xfffd, 0x80},
    {0xfffe, 0x50},
    {0x00bc, 0x11},
    {0x001b, 0x0 },
    {0x0090, 0x29},

    {0xfffe, 0x20},
    {0x0000, 0x00},
    {0x0004, 0x7},
    {0x0005, 0x80},
    {0x0006, 0x4},
    {0x0007, 0x38},

    {0xfffe, 0x26},
    {0x4000, 0xF9},
    {0x6001, 0x14},
    {0x6005, 0xc4},
    {0x6006, 0xA},
    {0x6007, 0x8C},
    {0x6008, 0x9},
    {0x6009, 0xFC},

    {0x8000, 0x3f},
    {0x8001, 0x80},
    {0x8002, 0x7},
    {0x8003, 0x38},
    {0x8004, 0x4},
    {0x8005, 0x3},
    {0x8006, 0x5},
    {0x8007, 0x99},
    {0x8008, 0x14},

    {0x8010, 0x5 },
    {0x8012, 0x40},
    {0x8013, 0x5 },
    {0x8014, 0xF4},
    {0x8015, 0x2 },
    {0x8016, 0x20},
    {0x8017, 0x1},
    {0x8018, 0xA2},
    {0x8019, 0x0 },

    {0xfffe, 0x30},
    {0x0000, 0x4f},
    {0x0001, 0x91},
    {0x0002, 0x00},
    {0x0003, 0xe5},
    {0x0004, 0x18},
    {0x0006, 0x5},
    {0x0007, 0x40},
    {0x0008, 0x2 },
    {0x0009, 0xF4},
    {0x000a, 0x5},
    {0x000b, 0x0 },
    {0x000c, 0x2 },
    {0x000d, 0xD0},
    {0x0027, 0xF1},
    {0x005e, 0x5},
    {0x005f, 0x3F},
    {0x0060, 0x2},
    {0x0061, 0xF3},
    {0x1908, 0x0},
    {0x1900, 0x0},
    {0x1901, 0x0},
    {0x1902, 0x0},
    {0x1903, 0x0},
    {0x1904, 0x5},
    {0x1905, 0x40},
    {0x1906, 0x2},
    {0x1907, 0xF4},
    {0x1908, 0x00},



    /*banding*/
	{0x00b4, 0x02},    /*banding mode*/
	{0x00b8, 0x06},    /* banding  exposure lines*/
	{0x00b9, 0x60},
};

static struct regval_list  xc7021_480p_regs_15fps[] = {
    {0xfffd, 0x80},
    {0xfffe, 0x50},
    {0x001c, 0xff},
    {0x001d, 0xff},
    {0x001e, 0xff},
    {0x001f, 0xff},
    {0x0018, 0x00},
    {0x0019, 0x00},
    {0x001a, 0x00},
    {0x001b, 0x00},
    {0x00bc, 0x11},
    {0x00bd, 0x00},
    {0x00be, 0x00},
    {0x00bf, 0x00},
    {0x0030, 0x9},
    {0x0031, 0x2},
    {0x0032, 0xA},
    {0x0020, 0x1},
    {0x0021, 0xE},
    {0x0023, 0x2},
    {0x0024, 0xA},
    {0x0025, 0x6},
    {0x0026, 0x1},
    {0x0027, 0x6},
    {0x0028, 0x8},
    {0x0029, 0x6},

	/* change page to 50 page*/
	{0xfffe, 0x50},
	/* setting of ISP for pin drive capability */
	{0x00aa, 0x10},/* pclk drive capability  00, 10, 20, 30*/
	{0x00ac, 0x10},/* data pin drive capability  00, 10, 20, 30*/
	{0x00ad, 0x10},/* data pin drive capability  00, 10, 20, 30*/
	{0x00ae, 0x10},/* data pin drive capability  00, 10, 20, 30*/
	{0x00af, 0x10},/* data pin drive capability  00, 10, 20, 30*/

    {0xfffe, 0x30},
    {0x0005, 0x08},
    {0xfffe, 0x50},
    {0x0200, 0x03},
    {0x0204, 0x03},
    {0x0208, 0x02},
    {0x0208, 0x01},
    {0xfffe, 0x30},
    {0x1f00, 0x00},
    {0x1f01, 0x00},
    {0x1f02, 0x00},
    {0x1f03, 0x00},
    {0x1f04, 0x05},
    {0x1f05, 0xa0},
    {0x1f06, 0x04},
    {0x1f07, 0x38},
    {0xfffd, 0x80},
    {0xfffe, 0x50},
    {0x00bc, 0x11},
    {0x001b, 0x00},
    {0x0090, 0x29},

    {0xfffe, 0x20},
    {0x0000, 0x00},
    {0x0004, 0x07},
    {0x0005, 0x80},
    {0x0006, 0x04},
    {0x0007, 0x40},
    {0xfffe, 0x26},
    {0x4000, 0xF9},
    {0x6001, 0x14},
    {0x6005, 0xc4},
    {0x6006, 0x05},
    {0x6007, 0x78},
    {0x6008, 0x04},
    {0x6009, 0xFC},

    {0x8000, 0x3f},
    {0x8001, 0x80},
    {0x8002, 0x07},
    {0x8003, 0x40},
    {0x8004, 0x04},
    {0x8005, 0x03},
    {0x8006, 0x05},
    {0x8007, 0x99},
    {0x8008, 0x14},

    {0x8010, 0x05},
    {0x8012, 0xA0},
    {0x8013, 0x05},
    {0x8014, 0x38},
    {0x8015, 0x04},
    {0x8016, 0xF0},
    {0x8017, 0x00},
    {0x8018, 0x04},
    {0x8019, 0x00},

    {0xfffe, 0x30},
    {0x0000, 0x4f},
    {0x0001, 0x91},
    {0x0002, 0x00},
    {0x0003, 0xe5},
    {0x0004, 0x18},
    {0x0006, 0x05},
    {0x0007, 0xA0},
    {0x0008, 0x04},
    {0x0009, 0x38},
    {0x000a, 0x02},
    {0x000b, 0x80},
    {0x000c, 0x01},
    {0x000d, 0xE0},
    {0x0027, 0xF1},
    {0x005e, 0x05},
    {0x005f, 0x9F},
    {0x0060, 0x04},
    {0x0061, 0x37},
    {0x1908, 0x01},
    {0x1900, 0x00},
    {0x1901, 0x00},
    {0x1902, 0x00},
    {0x1903, 0x00},
    {0x1904, 0x05},
    {0x1905, 0xA0},
    {0x1906, 0x04},
    {0x1907, 0x38},
    {0x1908, 0x00},
    /*banding*/
	{0x00b4, 0x02},    /* banding mode*/
	{0x00b8, 0x06},    /*banding  exposure lines*/
	{0x00b9, 0x60},
};

static struct regval_list  xc7021_360p_regs_15fps[] = {
    {0xfffd, 0x80},
    {0xfffe, 0x50},
    {0x001c, 0xff},
    {0x001d, 0xff},
    {0x001e, 0xff},
    {0x001f, 0xff},  /*cl*/
    {0x0018, 0x00},
    {0x0019, 0x00},
    {0x001a, 0x00},
    {0x001b, 0x00},
    {0x00bc, 0x11},  /*pa*/
    {0x00bd, 0x00},
    {0x00be, 0x00},
    {0x00bf, 0x00},
    {0x0030, 0x9},
    {0x0031, 0x2},
    {0x0032, 0xA},
    {0x0020, 0x1},
    {0x0021, 0xE},
    {0x0023, 0x2},
    {0x0024, 0xA},
    {0x0025, 0x6},
    {0x0026, 0x1},
    {0x0027, 0x6},
    {0x0028, 0x8},
    {0x0029, 0x6},
	/* change page to 50 page*/
	{0xfffe, 0x50},
	/* setting of ISP for pin drive capability */
	{0x00aa, 0x10},/* pclk drive capability  00, 10, 20, 30*/
	{0x00ac, 0x10},/* data pin drive capability  00, 10, 20, 30*/
	{0x00ad, 0x10},/* data pin drive capability  00, 10, 20, 30*/
	{0x00ae, 0x10},/* data pin drive capability  00, 10, 20, 30*/
	{0x00af, 0x10},/* data pin drive capability  00, 10, 20, 30*/

    {0xfffe, 0x30},
    {0x0005, 0x08},
    {0xfffe, 0x50},
    {0x0200, 0x03},
    {0x0204, 0x03},
    {0x0208, 0x02},
    {0x0208, 0x01},
    {0xfffe, 0x30},
    {0x1f00, 0x00},
    {0x1f01, 0x00},
    {0x1f02, 0x00},
    {0x1f03, 0x00},
    {0x1f04, 0x07},
    {0x1f05, 0x80},
    {0x1f06, 0x04},
    {0x1f07, 0x38},
    {0xfffd, 0x80},
    {0xfffe, 0x50},
    {0x00bc, 0x11},
    {0x001b, 0x00},
    {0x0090, 0x29},
    {0xfffe, 0x20},
    {0x0000, 0x00},
    {0x0004, 0x07},
    {0x0005, 0x80},
    {0x0006, 0x04},
    {0x0007, 0x40},
    {0xfffe, 0x26},
    {0x4000, 0xF9},
    {0x6001, 0x14},
    {0x6005, 0xc4},
    {0x6006, 0x05},
    {0x6007, 0x78},
    {0x6008, 0x04},
    {0x6009, 0xFC},
    {0x8000, 0x3f},
    {0x8001, 0x80},
    {0x8002, 0x07},
    {0x8003, 0x40},
    {0x8004, 0x04},
    {0x8005, 0x03},
    {0x8006, 0x05},
    {0x8007, 0x99},
    {0x8008, 0x14},
    {0x8010, 0x05},
    {0x8012, 0x80},
    {0x8013, 0x07},
    {0x8014, 0x38},
    {0x8015, 0x04},
    {0x8016, 0x00},
    {0x8017, 0x00},
    {0x8018, 0x04},
    {0x8019, 0x00},
    {0xfffe, 0x30},
    {0x0000, 0x4f},
    {0x0001, 0x91},
    {0x0002, 0x00},
    {0x0003, 0xe5},
    {0x0004, 0x18},
    {0x0006, 0x07},
    {0x0007, 0x80},
    {0x0008, 0x04},
    {0x0009, 0x38},
    {0x000a, 0x02},
    {0x000b, 0x80},
    {0x000c, 0x01},
    {0x000d, 0x68},
    {0x0027, 0xF1},
    {0x005e, 0x07},
    {0x005f, 0x7F},
    {0x0060, 0x04},
    {0x0061, 0x37},
    {0x1908, 0x00},
    {0x1900, 0x00},
    {0x1901, 0x00},
    {0x1902, 0x00},
    {0x1903, 0x00},
    {0x1904, 0x07},
    {0x1905, 0x80},
    {0x1906, 0x04},
    {0x1907, 0x38},
    {0x1908, 0x00},
    /*banding*/
	{0x00b4, 0x02},    /*anding mode*/
	{0x00b8, 0x06},    /*anding  exposure lines*/
	{0x00b9, 0x60},
};

static struct regval_list ps5220mipi_default_regs[] = { /*ps5220_1920X1080_SET */
	{0xEF, 0x01},
	{0x05, 0x03},
	{0xEF, 0x00},
	{0x06, 0x02},
	{0x0B, 0x00},
	{0x0C, 0xA0},
	{0x10, 0x01},
	{0x12, 0x80},
	{0x13, 0x00},
	{0x14, 0xFF},
	{0x15, 0x03},
	{0x16, 0xFF},
	{0x17, 0xFF},
	{0x18, 0xFF},
	{0x19, 0x64},
	{0x1A, 0x64},
	{0x1B, 0x64},
	{0x1C, 0x64},
	{0x1D, 0x64},
	{0x1E, 0x64},
	{0x1F, 0x64},
	{0x20, 0x64},
	{0x21, 0x00},
	{0x22, 0x00},
	{0x23, 0x00},
	{0x24, 0x00},
	{0x25, 0x00},
	{0x26, 0x00},
	{0x27, 0x00},
	{0x28, 0x00},
	{0x29, 0x64},
	{0x2A, 0x64},
	{0x2B, 0x64},
	{0x2C, 0x64},
	{0x2D, 0x64},
	{0x2E, 0x64},
	{0x2F, 0x64},
	{0x30, 0x64},
	{0x31, 0x0F},
	{0x32, 0x00},
	{0x33, 0x64},
	{0x34, 0x64},
	{0x89, 0x10},
	{0x8B, 0x00},
	{0x8C, 0x00},
	{0x8D, 0x00},
	{0x8E, 0x00},
	{0x8F, 0x00},
	{0x90, 0x02},
	{0x91, 0x00},
	{0x92, 0x11},
	{0x93, 0x10},
	{0x94, 0x00},
	{0x95, 0x00},
	{0x96, 0x00},
	{0x97, 0x00},
	{0x99, 0x00},
	{0x9A, 0x00},
	{0x9B, 0x09},
	{0x9C, 0x00},
	{0x9D, 0x00},
	{0x9E, 0x40},
	{0x9F, 0x01},
	{0xA0, 0x2C},
	{0xA1, 0x01},
	{0xA2, 0x2C},
	{0xA3, 0x07},
	{0xA4, 0xFF},
	{0xA5, 0x03},
	{0xA6, 0xFF},
	{0xA7, 0x00},
	{0xA8, 0x00},
	{0xA9, 0x11},
	{0xAA, 0x23},
	{0xAB, 0x23},
	{0xAD, 0x00},
	{0xAE, 0x00},
	{0xAF, 0x00},
	{0xB0, 0x00},
	{0xB1, 0x00},
	{0xBE, 0x05},
	{0xBF, 0x00},
	{0xC0, 0x10},
	{0xC7, 0x10},
	{0xC8, 0x01},
	{0xC9, 0x00},
	{0xCA, 0x55},
	{0xCB, 0x06},
	{0xCC, 0x09},
	{0xCD, 0x00},
	{0xCE, 0xA2},
	{0xCF, 0x00},
	{0xD0, 0x02},
	{0xD1, 0x10},
	{0xD2, 0x1E},
	{0xD3, 0x19},
	{0xD4, 0x04},
	{0xD5, 0x18},
	{0xD6, 0xC8},
	{0xF0, 0x00},
	{0xF1, 0x00},
	{0xF2, 0x00},
	{0xF3, 0x00},
	{0xF4, 0x00},
	{0xF5, 0x40},
	{0xF6, 0x00},
	{0xF7, 0x00},
	{0xF8, 0x00},
	{0xED, 0x01},
	{0xEF, 0x01},
	{0x02, 0xFF},
	{0x03, 0x01},
	{0x04, 0x45},
	{0x05, 0x03},
	{0x06, 0xFF},
	{0x07, 0x00},
	{0x08, 0x00},
	{0x09, 0x00},
	{0x0A, 0x04},
	{0x0B, 0x64},
	{0x0C, 0x00},
	{0x0D, 0x02},
	{0x0E, 0x00},
	{0x0F, 0x92},
	{0x10, 0x00},
	{0x11, 0x01},
	{0x12, 0x00},
	{0x13, 0x92},
	{0x14, 0x01},
	{0x15, 0x00},
	{0x16, 0x00},
	{0x17, 0x00},
	{0x1A, 0x00},
	{0x1B, 0x07},
	{0x1C, 0x90},
	{0x1D, 0x04},
	{0x1E, 0x4A},
	{0x1F, 0x00},
	{0x20, 0x00},
	{0x21, 0x00},
	{0x22, 0xD4},
	{0x23, 0x10},
	{0x24, 0xA0},
	{0x25, 0x00},
	{0x26, 0x08},
	{0x27, 0x09},
	{0x28, 0x60},
	{0x29, 0x0F},
	{0x2A, 0x09},
	{0x2B, 0x5F},
	{0x2C, 0x10},
	{0x2D, 0x42},
	{0x2E, 0x42},
	{0x2F, 0x10},
	{0x30, 0x41},
	{0x31, 0x44},
	{0x32, 0x10},
	{0x33, 0x41},
	{0x34, 0x00},
	{0x35, 0x01},
	{0x36, 0x00},
	{0x37, 0x2A},
	{0x38, 0x55},
	{0x39, 0x2C},
	{0x3A, 0x4A},
	{0x3B, 0x42},
	{0x3C, 0x02},
	{0x3D, 0x02},
	{0x3E, 0x11},
	{0x3F, 0x5E},
	{0x40, 0x40},
	{0x41, 0x15},
	{0x42, 0x5E},
	{0x43, 0x40},
	{0x44, 0x05},
	{0x45, 0x41},
	{0x46, 0x16},
	{0x47, 0x05},
	{0x48, 0x4B},
	{0x49, 0x0B},
	{0x4A, 0x12},
	{0x4B, 0x40},
	{0x4C, 0x80},
	{0x4D, 0x1E},
	{0x4E, 0x01},
	{0x4F, 0x4A},
	{0x50, 0x05},
	{0x51, 0x05},
	{0x52, 0x51},
	{0x53, 0x05},
	{0x54, 0x00},
	{0x55, 0x00},
	{0x56, 0x78},
	{0x57, 0x00},
	{0x58, 0x92},
	{0x59, 0x00},
	{0x5A, 0xD6},
	{0x5B, 0x00},
	{0x5C, 0x2E},
	{0x5D, 0x01},
	{0x5E, 0x9E},
	{0x5F, 0x00},
	{0x60, 0x3C},
	{0x61, 0x08},
	{0x62, 0x4C},
	{0x63, 0x62},
	{0x64, 0x02},
	{0x65, 0x00},
	{0x66, 0x00},
	{0x67, 0x00},
	{0x68, 0x00},
	{0x69, 0x00},
	{0x6A, 0x00},
	{0x6B, 0x92},
	{0x6C, 0x00},
	{0x6D, 0x64},
	{0x6E, 0x01},
	{0x6F, 0xEE},
	{0x70, 0x00},
	{0x71, 0x64},
	{0x72, 0x08},
	{0x73, 0x98},
	{0x74, 0x00},
	{0x75, 0x00},
	{0x76, 0x00},
	{0x77, 0x00},
	{0x78, 0x0A},
	{0x79, 0xAB},
	{0x7A, 0x50},
	{0x7B, 0x40},
	{0x7C, 0x40},
	{0x7D, 0x00},
	{0x7E, 0x01},
	{0x7F, 0x00},
	{0x80, 0x00},
	{0x87, 0x00},
	{0x88, 0x08},
	{0x89, 0x01},
	{0x8A, 0x04},
	{0x8B, 0x4A},
	{0x8C, 0x00},
	{0x8D, 0x01},
	{0x8E, 0x00},
	{0x90, 0x00},
	{0x91, 0x01},
	{0x92, 0x80},
	{0x93, 0x00},
	{0x94, 0xFF},
	{0x95, 0x00},
	{0x96, 0x00},
	{0x97, 0x01},
	{0x98, 0x02},
	{0x99, 0x09},
	{0x9A, 0x60},
	{0x9B, 0x02},
	{0x9C, 0x60},
	{0x9D, 0x00},
	{0x9E, 0x00},
	{0x9F, 0x00},
	{0xA0, 0x00},
	{0xA1, 0x00},
	{0xA2, 0x00},
	{0xA3, 0x00},
	{0xA4, 0x10},
	{0xA5, 0x04},
	{0xA6, 0x40},
	{0xA7, 0x00},
	{0xA8, 0x08},
	{0xA9, 0x07},
	{0xAA, 0x80},
	{0xAB, 0x01},
	{0xAD, 0x00},
	{0xAE, 0x00},
	{0xAF, 0x00},
	{0xB0, 0x50},
	{0xB1, 0x00},
	{0xB2, 0x00},
	{0xB3, 0x00},
	{0xB4, 0x50},
	{0xB5, 0x07},
	{0xB6, 0x80},
	{0xB7, 0x82},
	{0xB8, 0x0A},
	{0xCD, 0x95},
	{0xCE, 0xF6},
	{0xCF, 0x01},
	{0xD0, 0x42},
	{0xD1, 0x3C},
	{0xD2, 0x00},
	{0xD3, 0x1C},
	{0xD4, 0x00},
	{0xD5, 0x01},
	{0xD6, 0x00},
	{0xD7, 0x07},
	{0xD8, 0x84},
	{0xD9, 0x54},
	{0xDA, 0x70},
	{0xDB, 0x70},
	{0xDC, 0x10},
	{0xDD, 0x60},
	{0xDE, 0x50},
	{0xDF, 0x43},
	{0xE0, 0x70},
	{0xE1, 0x01},
	{0xE2, 0x35},
	{0xE3, 0x21},
	{0xE4, 0x66},
	{0xE6, 0x00},
	{0xE7, 0x00},
	{0xF5, 0x02},
	{0xF6, 0xA8},
	{0xF7, 0x03},
	{0xF0, 0x00},
	{0xF4, 0x02},
	{0xF2, 0x19},
	{0xF1, 0x0E},
	{0xF5, 0x12},
	{0x09, 0x01},
	{0xEF, 0x02},
	{0x00, 0x4A},
	{0x01, 0xA0},
	{0x02, 0x03},
	{0x03, 0x00},
	{0x04, 0x00},
	{0x05, 0x30},
	{0x06, 0x04},
	{0x07, 0x01},
	{0x08, 0x03},
	{0x09, 0x00},
	{0x0A, 0x30},
	{0x0B, 0x00},
	{0x0C, 0x00},
	{0x0D, 0x08},
	{0x0E, 0x20},
	{0x0F, 0x32},
	{0x10, 0x42},
	{0x11, 0x75},
	{0x12, 0x13},
	{0x13, 0x57},
	{0x14, 0x25},
	{0x15, 0x45},
	{0x16, 0xB9},
	{0x17, 0x31},
	{0x18, 0x43},
	{0x19, 0x34},
	{0x1A, 0x20},
	{0x30, 0xFF},
	{0x31, 0x06},
	{0x32, 0x07},
	{0x33, 0x85},
	{0x34, 0x00},
	{0x35, 0x00},
	{0x36, 0x00},
	{0x37, 0x01},
	{0x38, 0x00},
	{0x39, 0x00},
	{0x3A, 0xCE},
	{0x3B, 0x17},
	{0x3C, 0x64},
	{0x3D, 0x04},
	{0x3E, 0x00},
	{0x3F, 0x0A},
	{0x40, 0x04},
	{0x41, 0x05},
	{0x42, 0x04},
	{0x43, 0x05},
	{0x45, 0x00},
	{0x46, 0x00},
	{0x47, 0x00},
	{0x48, 0x00},
	{0x49, 0x00},
	{0x4A, 0x00},
	{0x4B, 0x00},
	{0x4C, 0x00},
	{0x4D, 0x00},
	{0x88, 0x07},
	{0x89, 0x22},
	{0x8A, 0x00},
	{0x8B, 0x14},
	{0x8C, 0x00},
	{0x8D, 0x00},
	{0x8E, 0x52},
	{0x8F, 0x60},
	{0x90, 0x20},
	{0x91, 0x00},
	{0x92, 0x01},
	{0x9E, 0x00},
	{0x9F, 0x40},
	{0xA0, 0x30},
	{0xA1, 0x00},
	{0xA2, 0x00},
	{0xA3, 0x03},
	{0xA4, 0xC0},
	{0xA5, 0x00},
	{0xA6, 0x00},
	{0xA7, 0x00},
	{0xA8, 0x00},
	{0xA9, 0x00},
	{0xAA, 0x00},
	{0xAB, 0x00},
	{0xAC, 0x00},
	{0xB7, 0x00},
	{0xB8, 0x00},
	{0xB9, 0x00},
	{0xBA, 0x00},
	{0xBB, 0x00},
	{0xBC, 0x00},
	{0xBD, 0x00},
	{0xBE, 0x00},
	{0xBF, 0x00},
	{0xC0, 0x00},
	{0xC1, 0x00},
	{0xC2, 0x00},
	{0xC3, 0x00},
	{0xC4, 0x00},
	{0xC5, 0x00},
	{0xC6, 0x00},
	{0xC7, 0x00},
	{0xC8, 0x00},
	{0xC9, 0x00},
	{0xCA, 0x00},
	{0xED, 0x01},
	{0xEF, 0x05},
	{0x03, 0x10},
	{0x04, 0xE0},
	{0x05, 0x01},
	{0x06, 0x00},
	{0x07, 0x80},
	{0x08, 0x02},
	{0x09, 0x09},
	{0x0A, 0x04},
	{0x0B, 0x06},
	{0x0C, 0x0C},
	{0x0D, 0xA1},
	{0x0E, 0x00},
	{0x0F, 0x00},
	{0x10, 0x01},
	{0x11, 0x00},
	{0x12, 0x00},
	{0x13, 0x00},
	{0x14, 0xB8},
	{0x15, 0x07},
	{0x16, 0x06},
	{0x17, 0x06},
	{0x18, 0x03},
	{0x19, 0x04},
	{0x1A, 0x06},
	{0x1B, 0x06},
	{0x1C, 0x07},
	{0x1D, 0x08},
	{0x1E, 0x1A},
	{0x1F, 0x00},
	{0x20, 0x00},
	{0x21, 0x1E},
	{0x22, 0x1E},
	{0x23, 0x01},
	{0x24, 0x04},
	{0x27, 0x00},
	{0x28, 0x00},
	{0x2A, 0x08},
	{0x2B, 0x02},
	{0x2C, 0xA4},
	{0x2D, 0x06},
	{0x2E, 0x00},
	{0x2F, 0x05},
	{0x30, 0xE0},
	{0x31, 0x01},
	{0x32, 0x00},
	{0x33, 0x00},
	{0x34, 0x00},
	{0x35, 0x00},
	{0x36, 0x00},
	{0x37, 0x00},
	{0x38, 0x0E},
	{0x39, 0x01},
	{0x3A, 0x02},
	{0x3B, 0x01},
	{0x3C, 0x00},
	{0x3D, 0x00},
	{0x3E, 0x00},
	{0x3F, 0x00},
	{0x40, 0x16},
	{0x41, 0x26},
	{0x42, 0x00},
	{0x47, 0x05},
	{0x48, 0x07},
	{0x49, 0x01},
	{0x4D, 0x02},
	{0x4F, 0x00},
	{0x54, 0x05},
	{0x55, 0x01},
	{0x56, 0x05},
	{0x57, 0x01},
	{0x58, 0x02},
	{0x59, 0x01},
	{0x5B, 0x00},
	{0x5C, 0x03},
	{0x5D, 0x00},
	{0x5E, 0x07},
	{0x5F, 0x08},
	{0x60, 0x00},
	{0x61, 0x00},
	{0x62, 0x00},
	{0x63, 0x28},
	{0x64, 0x30},
	{0x65, 0x9E},
	{0x66, 0xB9},
	{0x67, 0x52},
	{0x68, 0x70},
	{0x69, 0x4E},
	{0x70, 0x00},
	{0x71, 0x00},
	{0x72, 0x00},
	{0x90, 0x04},
	{0x91, 0x01},
	{0x92, 0x00},
	{0x93, 0x00},
	{0x94, 0x03},
	{0x96, 0x00},
	{0x97, 0x01},
	{0x98, 0x01},
	{0xA0, 0x00},
	{0xA1, 0x01},
	{0xA2, 0x00},
	{0xA3, 0x01},
	{0xA4, 0x00},
	{0xA5, 0x01},
	{0xA6, 0x00},
	{0xA7, 0x00},
	{0xAA, 0x00},
	{0xAB, 0x0F},
	{0xAC, 0x08},
	{0xAD, 0x09},
	{0xAE, 0x0A},
	{0xAF, 0x0B},
	{0xB0, 0x00},
	{0xB1, 0x00},
	{0xB2, 0x01},
	{0xB3, 0x00},
	{0xB4, 0x00},
	{0xB5, 0x0A},
	{0xB6, 0x0A},
	{0xB7, 0x0A},
	{0xB8, 0x0A},
	{0xB9, 0x00},
	{0xBA, 0x00},
	{0xBB, 0x00},
	{0xBC, 0x00},
	{0xBD, 0x00},
	{0xBE, 0x00},
	{0xBF, 0x00},
	{0xC0, 0x00},
	{0xC1, 0x00},
	{0xC2, 0x00},
	{0xC3, 0x00},
	{0xC4, 0x00},
	{0xC5, 0x00},
	{0xC6, 0x00},
	{0xC7, 0x00},
	{0xC8, 0x00},
	{0xD3, 0x80},
	{0xD4, 0x00},
	{0xD5, 0x00},
	{0xD6, 0x03},
	{0xD7, 0x77},
	{0xD8, 0x00},
	{0xED, 0x01},

	{0xEF, 0x00},
	{0xbe, 0x15},
	{0x11, 0x00},
	{0xEF, 0x01},
	{0x02, 0xFB},
	{0x05, 0x31},
	{0x09, 0x01},
/*mirror and flip setting*/

	 {0xEF, 0x01},
	{0x07, 0x04},
	 {0x1b, 0x87},
	 {0x1d, 0x84},

	 {0x09, 0x01},
};

/*
 * Here we'll try to encapsulate the changes for just the output
 * video format.
 */

static struct regval_list sensor_fmt_yuv422_yuyv[] = {

};


static int sensor_write_ps5220(struct v4l2_subdev *sd, unsigned char reg,
    unsigned char value)
{
	int ret = 0;
	int cnt = 0;
	int addr;
	struct cci_driver *cci_drv = v4l2_get_subdevdata(sd);

	addr = cci_drv->cci_saddr;
	cci_drv->cci_saddr = I2C_ADDR_PS5220_SENSOR;

	ret = cci_write_a8_d8(sd, reg, value);
	while (ret != 0 && cnt < 2) {
		ret = cci_write_a8_d8(sd, reg, value);
		cnt++;
	}
	if (cnt > 0)
		sensor_dbg("sensor write retry=%d\n", cnt);
	cci_drv->cci_saddr = addr;
	return ret;
}


static int sensor_write_array_ps5220(struct v4l2_subdev *sd, struct regval_list *regs, int array_size)
{
	int ret = 0;
	int i = 0;
	struct cci_driver *cci_drv = v4l2_get_subdevdata(sd);

	if (!regs)
		return -EINVAL;
	ps5220_i2c_bypass(sd, 1);

	while (i < array_size) {
		if (0/*regs->addr == REG_DLY*/) {  /*fix me????*/
			msleep(regs->data);
		} else {
			ret = sensor_write_ps5220(sd, regs->addr, regs->data);
			if (ret < 0)
				printk("%s sensor write array error!!\n", cci_drv->name);
		}
		i++;
		regs++;
	}

	ps5220_i2c_bypass(sd, 0);
	return 0;
}

static int sensor_read_ps5220(struct v4l2_subdev *sd, unsigned char reg,
    unsigned char *value)
{
	int ret = -1;
	int cnt = 0;
	struct cci_driver *cci_drv = v4l2_get_subdevdata(sd);
	int addr =  cci_drv->cci_saddr;

	cci_drv->cci_saddr = I2C_ADDR_PS5220_SENSOR;
	ret = cci_read_a8_d8(sd, reg, value);
	while (ret != 0 && cnt < 8) {
		ret = cci_read_a8_d8(sd, reg, value);
		cnt++;
	}
	cci_drv->cci_saddr = addr;
	if (cnt > 0)
		sensor_dbg("sensor read retry=%d\n", cnt);

	return ret;

}

static int sensor_g_exp(struct v4l2_subdev *sd, __s32 *value)
{
	struct sensor_info *info = to_state(sd);

	*value = info->exp;
	sensor_dbg("sensor_get_exposure = %d\n", info->exp);

	return 0;
}

/*
static int sensor_s_exp(struct v4l2_subdev *sd, unsigned int exp_val)
{
	struct sensor_info *info = to_state(sd);

	info->exp = exp_val;
	return 0;
}
*/

static int sensor_g_gain(struct v4l2_subdev *sd, __s32 *value)
{
	struct sensor_info *info = to_state(sd);

	*value = info->gain;
	sensor_dbg("sensor_get_gain = %d\n", info->gain);
	return 0;
}

/*
static int sensor_s_gain(struct v4l2_subdev *sd, int gain_val)
{
	struct sensor_info *info = to_state(sd);

	info->gain = gain_val;

	return 0;

}
*/

static int sensor_s_exp_gain(struct v4l2_subdev *sd,
			     struct sensor_exp_gain *exp_gain)
{
	int exp_val, gain_val;
	struct sensor_info *info = to_state(sd);

	exp_val = exp_gain->exp_val;
	gain_val = exp_gain->gain_val;

	info->exp = exp_val;
	info->gain = gain_val;
	return 0;
}

static int sensor_s_sw_stby(struct v4l2_subdev *sd, int on_off)
{
	int ret = 0;
	return ret;
}

/*
 * Stuff that knows about the sensor.
 */

static int sensor_power(struct v4l2_subdev *sd, int on)
{
	int ret;
	ret = 0;
	switch (on) {
	case STBY_ON:
		sensor_dbg("CSI_SUBDEV_STBY_ON!\n");
		cci_lock(sd);
		vin_gpio_write(sd, PWDN, CSI_GPIO_HIGH);
		vin_set_mclk(sd, OFF);
		cci_unlock(sd);
		break;
	case STBY_OFF:
		sensor_dbg("CSI_SUBDEV_STBY_OFF!\n");
		cci_lock(sd);
		vin_set_mclk_freq(sd, MCLK);
		vin_set_mclk(sd, ON);
		usleep_range(10000, 12000);
		vin_gpio_write(sd, PWDN, CSI_GPIO_LOW);
		usleep_range(10000, 12000);
		cci_unlock(sd);
		ret = sensor_s_sw_stby(sd, CSI_GPIO_LOW);
		if (ret < 0)
			sensor_err("soft stby off falied!\n");
		usleep_range(10000, 12000);
		break;
	case PWR_ON:
		sensor_dbg("CSI_SUBDEV_PWR_ON!\n");
		cci_lock(sd);
		vin_gpio_set_status(sd, PWDN, 1);	/*set the gpio to output */
		vin_gpio_set_status(sd, RESET, 1);	/*set the gpio to output */

		vin_gpio_write(sd, RESET, CSI_GPIO_HIGH);
		vin_gpio_write(sd, PWDN, CSI_GPIO_HIGH);
		usleep_range(1000, 1200);
		vin_gpio_write(sd, POWER_EN, CSI_GPIO_HIGH);
		vin_set_pmu_channel(sd, AFVDD, ON);	/*1.2V  CVDD_12 */
		vin_set_pmu_channel(sd, DVDD, ON);	/*xc7021 VCAM_D 1.2v */
		usleep_range(1000, 1200);
		vin_set_pmu_channel(sd, IOVDD, ON);	/*VCAM_IO 3.3v */

		usleep_range(1000, 1200);
		vin_set_pmu_channel(sd, AVDD, ON);	/* VCAM_AF 1.2v */
		usleep_range(1000, 1200);

		vin_gpio_write(sd, PWDN, CSI_GPIO_LOW);
		usleep_range(10000, 12000);
		vin_gpio_write(sd, RESET, CSI_GPIO_LOW);
		usleep_range(30000, 32000);
		vin_gpio_write(sd, RESET, CSI_GPIO_HIGH);
		vin_set_mclk_freq(sd, MCLK);
		vin_set_mclk(sd, ON);
		usleep_range(10000, 12000);
		cci_unlock(sd);
		break;

	case PWR_OFF:
		sensor_dbg("CSI_SUBDEV_PWR_OFF!\n");
		cci_lock(sd);
		vin_gpio_write(sd, POWER_EN, CSI_GPIO_LOW);
		vin_gpio_set_status(sd, PWDN, 1);	/*set the gpio to output */
		vin_gpio_set_status(sd, RESET, 1);	/*set the gpio to output */
		vin_gpio_write(sd, RESET, CSI_GPIO_LOW);
		vin_gpio_write(sd, PWDN, CSI_GPIO_HIGH);
		vin_set_mclk(sd, OFF);
		vin_set_pmu_channel(sd, AVDD, OFF);	/* VCAM_AF 3.3v */
		usleep_range(10000, 12000);
		vin_set_pmu_channel(sd, DVDD, OFF);	/*VCAM_D 1.5v */
		usleep_range(10000, 12000);
		vin_set_pmu_channel(sd, IOVDD, OFF);	/*VCAM_IO 2.8v */
		vin_set_pmu_channel(sd, AFVDD, OFF);	/*1.2V  CVDD_12 */
		vin_gpio_set_status(sd, RESET, 0);	/*set the gpio to input */
		vin_gpio_set_status(sd, PWDN, 0);	/*set the gpio to input */
		cci_unlock(sd);
		break;
	default:
		return -EINVAL;
	}

	return 0;
}

static int sensor_reset(struct v4l2_subdev *sd, u32 val)
{
	switch (val) {
	case 0:
		vin_gpio_write(sd, RESET, CSI_GPIO_HIGH);
		usleep_range(10000, 12000);
		break;
	case 1:
		vin_gpio_write(sd, RESET, CSI_GPIO_LOW);
		usleep_range(10000, 12000);
		break;
	default:
		return -EINVAL;
	}

	return 0;
}

static int xc7021_isp_detect(struct v4l2_subdev *sd)
{
	int ret;
	struct regval_list regs;

	regs.addr = 0xfffb;
	ret = sensor_read(sd, regs.addr, &regs.data);
	sensor_dbg("PS5220_xc7021 [0xfffb] chip  ID =0x%x\n ", regs.data);

	regs.addr = 0xfffc;
	ret = sensor_read(sd, regs.addr, &regs.data);
	if (ret < 0) {
		sensor_err("sensor_read err at sensor_detect!\n");
		return ret;
	}
	sensor_dbg("PS5220_xc7021 [0xfffc] chip  ID =0x%x\n ", regs.data);

	return 0;
}

static int ps5220_i2c_bypass(struct v4l2_subdev *sd, bool enable)
{
	int ret = -1;
	if (enable > 0) {
		ret = sensor_write_array(sd, bypass_on, ARRAY_SIZE(bypass_on));
		printk("ps5220_i2c_bypass bypass_on\n");
	} else {
		ret = sensor_write_array(sd, bypass_off, ARRAY_SIZE(bypass_off));
		printk("ps5220_i2c_bypass bypass_off\n");
	}
	if (ret < 0) {
		sensor_err("write  i2c_bypass %d sensor_default_regs fail \n", enable);
		return ret;
	}

	return 0;
}

static int sensor_detect(struct v4l2_subdev *sd)
{
	int ret;
	struct regval_list regs;

	ps5220_i2c_bypass(sd, 1);
	regs.addr = 0x00;
	regs.data = PS5220_CHIPID;

	ret = sensor_read_ps5220(sd, regs.addr, (unsigned char *)&regs.data);
	sensor_dbg("PS5220 chip  ID [0x00]=0x%x\n ", regs.data);
	if (ret < 0 || (regs.data != PS5220_CHIPID)) {
		sensor_err("sensor_read err at sensor_detect!\n");
		ret = -1;
	}

	ret = sensor_read_ps5220(sd, 0x01 , (unsigned char *)&regs.data);
	if (ret < 0 || (regs.data != 0x20)) {
		sensor_err("sensor_read err at sensor_detect!\n");
		ret = -1;
	}
	sensor_dbg("OV2710 chip  ID [0x01]=0x%x\n ", regs.data);
	ps5220_i2c_bypass(sd, 0);

	return ret;
}

static int sensor_init(struct v4l2_subdev *sd, u32 val)
{
	int ret;
	struct sensor_info *info = to_state(sd);

	sensor_dbg("sensor_init\n");
	/*Make sure it is a target sensor */
	ret = xc7021_isp_detect(sd);
	if (ret) {
		sensor_err("xc7021_isp chip is not an target chip.\n");
		return ret;
	} else
		sensor_print("xc7021_isp chip found is target chip.\n");

	info->focus_status = 0;
	info->low_speed = 0;
	info->width = HD1080_WIDTH;
	info->height = HD1080_HEIGHT;
	info->hflip = 0;
	info->vflip = 0;
	info->gain = 0;

	info->tpf.numerator = 1;
	info->tpf.denominator = SENSOR_FRAME_RATE;

	ret = sensor_write_array(sd, XC7021_default_regs_25fps,
			ARRAY_SIZE(XC7021_default_regs_25fps));
	if (ret < 0) {
		sensor_err("write sensor_default_regs error\n");
		return ret;
	}
	msleep(10);

	ret = sensor_detect(sd);
	if (ret) {
		sensor_err("chip found is not an target chip.\n");
		return ret;
	}

	return 0;
}

static long sensor_ioctl(struct v4l2_subdev *sd, unsigned int cmd, void *arg)
{
	int ret = 0;
	struct sensor_info *info = to_state(sd);
	switch (cmd) {
	case GET_CURRENT_WIN_CFG:
		if (info->current_wins != NULL) {
			memcpy(arg, info->current_wins,
			       sizeof(struct sensor_win_size));
			ret = 0;
		} else {
			sensor_err("empty wins!\n");
			ret = -1;
		}
		break;
	case SET_FPS:
		break;
	case ISP_SET_EXP_GAIN:
		sensor_s_exp_gain(sd, (struct sensor_exp_gain *)arg);
		break;
	default:
		return -EINVAL;
	}

	return ret;
}

static struct sensor_format_struct  sensor_formats[] = {
	{
		.desc		= "YUYV 4:2:2",
		.mbus_code	= V4L2_MBUS_FMT_YUYV8_2X8,
		.regs 		= sensor_fmt_yuv422_yuyv,
		.regs_size = ARRAY_SIZE(sensor_fmt_yuv422_yuyv),
		.bpp		= 2,
	},
};
#define N_FMTS ARRAY_SIZE(sensor_formats)

/*
 * Then there is the issue of window sizes.  Try to capture the info here.
 */
static struct sensor_win_size sensor_win_sizes_25fps[] = {
	{
	 .width = HD1080_WIDTH,
	 .height = HD1080_HEIGHT,
	 .hoffset = 0,
	 .voffset = 0,
	 .regs = XC7021_default_regs_25fps,
	 .regs_size = ARRAY_SIZE(XC7021_default_regs_25fps),
	 .set_size = NULL,
	 } , {
		     .width = HD720_WIDTH,
		     .height = HD720_HEIGHT,
		     .hoffset = 0,
		     .voffset = 0,
		     .regs = xc7021_720p_regs_25fps,
		     .regs_size = ARRAY_SIZE(xc7021_720p_regs_25fps),
		     .set_size = NULL,
	 } , {
	.width = VGA_WIDTH,
	.height = VGA_HEIGHT,
	.hoffset = 0,
	.voffset = 0,
	.regs = xc7021_480p_regs_25fps,
	.regs_size = ARRAY_SIZE(xc7021_480p_regs_25fps),
	.set_size = NULL,
	} , {
		     .width = VGA_WIDTH,
		     .height = 360,
		     .hoffset = 0,
		     .voffset = 0,
		     .regs = xc7021_360p_regs_25fps,
		     .regs_size = ARRAY_SIZE(xc7021_360p_regs_25fps),
		     .set_size = NULL,
	} ,
};

static struct sensor_win_size sensor_win_sizes_15fps[] = {
	{
	 .width = HD1080_WIDTH,
	 .height = HD1080_HEIGHT,
	 .hoffset = 0,
	 .voffset = 0,
	 .regs = xc7021_1080p_regs_15fps,
	 .regs_size = ARRAY_SIZE(xc7021_1080p_regs_15fps),
	 .set_size = NULL,
	 } , {
		     .width = HD720_WIDTH,
		     .height = HD720_HEIGHT,
		     .hoffset = 0,
		     .voffset = 0,
		     .regs = xc7021_720p_regs_15fps,
		     .regs_size = ARRAY_SIZE(xc7021_720p_regs_15fps),
		     .set_size = NULL,
	 } , {
	.width = VGA_WIDTH,
	.height = VGA_HEIGHT,
	.hoffset = 0,
	.voffset = 0,
	.regs = xc7021_480p_regs_15fps,
	.regs_size = ARRAY_SIZE(xc7021_480p_regs_15fps),
	.set_size = NULL,
	} , {
		     .width = VGA_WIDTH,
		     .height = 360,
		     .hoffset = 0,
		     .voffset = 0,
		     .regs = xc7021_360p_regs_15fps,
		     .regs_size = ARRAY_SIZE(xc7021_360p_regs_15fps),
		     .set_size = NULL,
	} ,
};

#define N_WIN_SIZES_15FPS (ARRAY_SIZE(sensor_win_sizes_15fps))
#define N_WIN_SIZES_25FPS (ARRAY_SIZE(sensor_win_sizes_25fps))

static int sensor_g_mbus_config(struct v4l2_subdev *sd,
				struct v4l2_mbus_config *cfg)
{
	cfg->type = V4L2_MBUS_PARALLEL;
	cfg->flags = V4L2_MBUS_MASTER | VREF_POL | HREF_POL | CLK_POL;

	return 0;
}

static int sensor_queryctrl(struct v4l2_subdev *sd, struct v4l2_queryctrl *qc)
{
	/* Fill in min, max, step and default value for these controls. */
	/* see include/linux/videodev2.h for details */

	switch (qc->id) {
	case V4L2_CID_GAIN:
		return v4l2_ctrl_query_fill(qc, 1 * 16, 16 * 16, 1, 16);
	case V4L2_CID_EXPOSURE:
		return v4l2_ctrl_query_fill(qc, 1, 65536 * 16, 1, 1);
	case V4L2_CID_FRAME_RATE:
		return v4l2_ctrl_query_fill(qc, 15, 120, 1, 30);
	}
	return -EINVAL;
}

static int sensor_g_ctrl(struct v4l2_subdev *sd, struct v4l2_control *ctrl)
{
	switch (ctrl->id) {
	case V4L2_CID_GAIN:
		return sensor_g_gain(sd, &ctrl->value);
	case V4L2_CID_EXPOSURE:
		return sensor_g_exp(sd, &ctrl->value);
	}
	return -EINVAL;
}

static int sensor_s_ctrl(struct v4l2_subdev *sd, struct v4l2_control *ctrl)
{
#if 0
	struct v4l2_queryctrl qc;
	int ret;

	qc.id = ctrl->id;
	ret = sensor_queryctrl(sd, &qc);
	if (ret < 0) {
		return ret;
	}

	if (ctrl->value < qc.minimum || ctrl->value > qc.maximum) {
		sensor_err("max gain qurery is %d,min gain qurey is %d\n",
			    qc.maximum, qc.minimum);
		return -ERANGE;
	}

	switch (ctrl->id) {
	case V4L2_CID_GAIN:
		return sensor_s_gain(sd, ctrl->value);
	case V4L2_CID_EXPOSURE:
		return sensor_s_exp(sd, ctrl->value);
	}
	return -EINVAL;
#else
	return 0;
#endif
}

static int sensor_g_chip_ident(struct v4l2_subdev *sd,
			       struct v4l2_dbg_chip_ident *chip)
{
	struct i2c_client *client = v4l2_get_subdevdata(sd);

	return v4l2_chip_ident_i2c_client(client, chip, V4L2_IDENT_SENSOR, 0);
}

static int sensor_reg_init(struct sensor_info *info)
{
	struct v4l2_subdev *sd = &info->sd;
	struct sensor_format_struct *sensor_fmt = info->fmt;
	struct sensor_win_size *wsize = info->current_wins;

	sensor_dbg("sensor_reg_init\n");
	sensor_write_array(sd, sensor_fmt->regs, sensor_fmt->regs_size);

	if (wsize->regs)
		sensor_write_array(sd, wsize->regs, wsize->regs_size);
	msleep(10);

#ifndef DEBUG_COLORBAR
	sensor_detect(sd);
	/*ps5220 initial*/
	sensor_write_array_ps5220(sd, ps5220mipi_default_regs, ARRAY_SIZE(ps5220mipi_default_regs));
#endif
	msleep(10);

	return 0;
}

static int sensor_s_stream(struct v4l2_subdev *sd, int enable)
{
	struct sensor_info *info = to_state(sd);
	sensor_print("%s on = %d, %d*%d %x\n", __func__, enable,
		  info->current_wins->width,
		  info->current_wins->height, info->fmt->mbus_code);

	if (!enable)
		return 0;
	return sensor_reg_init(info);
}


/* ----------------------------------------------------------------------- */

static const struct v4l2_subdev_core_ops sensor_core_ops = {
	.g_chip_ident = sensor_g_chip_ident,
	.g_ctrl = sensor_g_ctrl,
	.s_ctrl = sensor_s_ctrl,
	.queryctrl = sensor_queryctrl,
	.reset = sensor_reset,
	.init = sensor_init,
	.s_power = sensor_power,
	.ioctl = sensor_ioctl,
};

static const struct v4l2_subdev_video_ops sensor_video_ops = {
	.s_parm = sensor_s_parm,
	.g_parm = sensor_g_parm,
	.s_stream = sensor_s_stream,
	.g_mbus_config = sensor_g_mbus_config,
};

static const struct v4l2_subdev_pad_ops sensor_pad_ops = {
	.enum_mbus_code = sensor_enum_mbus_code,
	.enum_frame_size = sensor_enum_frame_size,
	.get_fmt = sensor_get_fmt,
	.set_fmt = sensor_set_fmt,
};

static const struct v4l2_subdev_ops sensor_ops = {
	.core = &sensor_core_ops,
	.video = &sensor_video_ops,
	.pad = &sensor_pad_ops,
};

/* ----------------------------------------------------------- */
static struct cci_driver cci_drv = {
	.name = SENSOR_NAME,
	.addr_width = CCI_BITS_16,
	.data_width = CCI_BITS_8,
};

static int sensor_probe(struct i2c_client *client,
			const struct i2c_device_id *id)
{
	struct v4l2_subdev *sd;
	struct sensor_info *info;
	info = kzalloc(sizeof(struct sensor_info), GFP_KERNEL);

	if (info == NULL)
		return -ENOMEM;
	sd = &info->sd;
	cci_dev_probe_helper(sd, client, &sensor_ops, &cci_drv);
	mutex_init(&info->lock);
	info->fmt = &sensor_formats[0];
	info->fmt_pt = &sensor_formats[0];

	if (info->tpf.denominator == SENSOR_FRAME_RATE_15FPS) {
		info->win_pt = &sensor_win_sizes_15fps[0];
		info->win_size_num = N_WIN_SIZES_15FPS;
	} else {
		info->win_pt = &sensor_win_sizes_25fps[0];
		info->win_size_num = N_WIN_SIZES_25FPS;
	}

	info->fmt_num = N_FMTS;

	info->sensor_field = V4L2_FIELD_NONE;
	info->af_first_flag = 1;
	return 0;
}

static int sensor_remove(struct i2c_client *client)
{
	struct v4l2_subdev *sd;
	sd = cci_dev_remove_helper(client, &cci_drv);
	kfree(to_state(sd));
	return 0;
}

static const struct i2c_device_id sensor_id[] = {
	{SENSOR_NAME, 0},
	{}
};

MODULE_DEVICE_TABLE(i2c, sensor_id);

static struct i2c_driver sensor_driver = {
	.driver = {
		   .owner = THIS_MODULE,
		   .name = SENSOR_NAME,
		   },
	.probe = sensor_probe,
	.remove = sensor_remove,
	.id_table = sensor_id,
};

static __init int init_sensor(void)
{
	return cci_dev_init_helper(&sensor_driver);
}

static __exit void exit_sensor(void)
{
	cci_dev_exit_helper(&sensor_driver);
}

module_init(init_sensor);
module_exit(exit_sensor);
